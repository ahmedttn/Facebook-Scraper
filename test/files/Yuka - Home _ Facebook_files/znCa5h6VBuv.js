;/*FB_PKG_DELIM*/

__d("LSDatabase",[],(function(a,b,c,d,e,f){}),null);
__d("LSTableDefaults",[],(function(a,b,c,d,e,f){e.exports={sync_groups:{syncStatus:[0,0],sendSyncParams:!1,minTimeToSyncTimestampMs:[0,0],canIgnoreTimestamp:!1,priority:[0,0],lastSyncRequestTimestampMs:[0,0],lastSyncCompletedTimestampMs:[0,0],syncChannel:[0,1]},pending_tasks:{enqueueTimestampMs:[0,0],firstExecutedTimestampMs:[0,0],failureCount:[0,0],minTimeToSyncTimestampMs:[0,0],pluginType:[0,0],priority:[0,0]},pending_fire_and_forget_tasks:{enqueueTimestampMs:[0,0],priority:[0,0]},contacts:{isMessengerUser:!1,isMemorialized:!1,blockedByViewerStatus:[0,0],rank:[0,0],contactType:[0,0],contactTypeExact:[0,0],canViewerMessage:!0,gender:[0,0],authorityLevel:[0,0],optimisticBlockedByViewerStatus:[0,0],optimisticBlockedByViewerStatusTimestampMs:[0,0],contactReachabilityStatusType:[0,0],restrictionType:[0,0],waConnectStatus:[0,0],capabilities2:[0,0]},ig_contact_info:{e2eeEligibility:[0,0]},reactions:{timestampMs:[0,0],authorityLevel:[0,0]},threads:{lastActivityTimestampMs:[0,0],lastReadWatermarkTimestampMs:[0,0],removeWatermarkTimestampMs:[0,0],muteExpireTimeMs:[0,0],isAdminSnippet:!1,ongoingCallState:[0,0],snippetHasEmoji:!1,hasPersistentMenu:!1,disableComposerInput:!1,capabilities:[0,0],isCustomThreadPicture:!1,isDisappearingMode:!1,unreadDisappearingMessageCount:[0,0],authorityLevel:[0,0],capabilities2:[0,0],muteCallsExpireTimeMs:[0,0],unsendLimitMs:[0,0],threadInvitesEnabled:[0,0],threadInvitesEnabledV2:[0,0],capabilities3:[0,0]},threads_ranges_v2__generated:{minThreadKey:[0,0],minLastActivityTimestampMs:[0,0],maxThreadKey:[0,0],maxLastActivityTimestampMs:[0,0],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},messages:{timestampMs:[0,0],primarySortKey:[0,0],secondarySortKey:[0,0],isAdminMessage:!1,sendStatus:[0,0],sendStatusV2:[0,0],isUnsent:!1,replyStatus:[0,0],replyAttachmentType:[0,0],hasQuickReplies:!1,textHasLinks:!1,viewFlags:[0,0],displayedContentTypes:[0,1],quickReplyType:[0,0],authorityLevel:[0,0],unsentTimestampMs:[0,0]},messages_ranges_v2__generated:{isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},participants:{readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:[0,0],readActionTimestampMs:[0,0],groupParticipantJoinState:[0,0]},attachments:{timestampMs:[0,0],attachmentType:[0,0],hasMedia:!1,isSharable:!1,hasXma:!1,attachmentIndex:[0,0],authorityLevel:[0,0]},attachments_ranges_v2__generated:{mediaGroup:[0,0],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},attachment_items:{attachmentIndex:[0,0]},group_membership_approval_requests:{authorityLevel:[0,0]},admin_message_ctas:{timestampMs:[0,0],showAdChoiceIcon:!1},thread_nullstate:{ctaType:[0,0],privacyTextCtaType:[0,0]},messages_status:{timestampMs:[0,0]},polls:{pollType:[0,0]},poll_options_v2:{voteCount:[0,0],sortKeyVotingTimestamp:[0,0],sortKeyCreationTimestamp:[0,0]},filtered_threads_ranges_v3__generated:{minThreadKey:[0,0],minLastActivityTimestampMs:[0,0],maxThreadKey:[0,0],maxLastActivityTimestampMs:[0,0],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1,folderName:"inbox",secondaryThreadRangeFilter:[0,0],threadRangeFilterValue:""},community_folders:{capabilities:[0,0],notificationMutedUntil:[0,0],inviteStatus:[0,0],capabilities2:[0,0],capabilities3:[0,0]},community_members:{source:[0,0],adminActions:[0,0]},inbox_threads_ranges:{minThreadKey:[0,0],minLastActivityTimestampMs:[0,0],isLoadingBefore:!1,hasMoreBefore:!1},community_direct_invites_presets:{fallbackUrl:"",pictureUrlExpirationTimestampMs1:[0,0],pictureUrlExpirationTimestampMs2:[0,0],presetTypeV2:"ALL_MEMBERS"},sync_group_threads_ranges:{minThreadKey:[0,0],minLastActivityTimestampMs:[0,0],isLoadingBefore:!1,hasMoreBefore:!1},community_chat_polls:{pollType:[0,0]},community_chat_poll_options:{voteCount:[0,0],sortKeyVotingTimestamp:[0,0],sortKeyCreationTimestamp:[0,0]},reactions_v2:{viewerReactionTimestampMs:[0,0],lastUpdatedTimestampMs:[0,0]},group_invitations_pending:{communityJoinRequestStatus:[0,0],communityParticipationControlRequestStatus:[0,0],communityParticipationControlSetting:[0,0]},universal_search_recent_searches:{lastAccessedTimestampMs:[0,0]},contact_upload_settings:{authorityLevel:[0,0]},presence_settings:{isActiveStatusViewable:!1,isActiveStatusViewableOnFb:!1,isActiveStatusViewableOnMessenger:!1,hasConvertedToViewSideSettings:!1},video_chat_links_joining:{canAnonymousUsersJoin:[0,0]},notification_settings:{includeInSwitchAccountBadges:!1,mutePageAccountMessageReminder:!1},avatar_settings:{enableAvatarHotlike:!1},rtc_call_events:{isProcessed:!1},transaction_history:{timestampMs:[0,0]},thread_themes:{isDeprecated:!1},ranking_scores:{score:[0,0],scoreIndex:[0,0]},story_buckets:{pageNum:[0,0],readState:[0,0]},stories:{authorityLevel:[0,0]},story_viewers:{interactionType:[0,1],authorityLevel:[0,0]},story_reactions:{authorityLevel:[0,0]},story_ad_unit:{shouldShowAdChoice:!1},story_overlays:{authorityLevel:[0,0]},rooms:{notificationMutedUntilMs:[0,0]},media_staging:{progress:[0,0]},data_trace_meta:{initTimestampMs:[0,0],foregroundTimestampMs:[0,0],traceType:[0,0],shouldFlush:!1},data_trace_addon:{timestampMs:[0,0]},secure_encrypted_backups_client_state:{authorityLevel:[0,0],encryptionVersion:[0,0],revisionVersion:[0,0]},secure_encrypted_backups_epochs:{authorityLevel:[0,0]},encrypted_backups:{authorityLevel:[0,0]},secure_encrypted_backups_generated_recovery_code:{virtualDeviceType:[0,1]},encrypted_backups_virtual_devices:{virtualDeviceType:[0,1],removalStatus:[0,1]},encrypted_backups_metadata:{authorityLevel:[0,0]},cutover_threads:{isMigrated:!1,showOpenMessageHistory:!1}}}),null);
__d("LSTableSchemas",[],(function(a,b,c,d,e,f){e.exports=[[{name:"sync_groups",id:1,primary_key:["groupId"]},{name:"pending_tasks",id:2,primary_key:["taskId"],indexes:{queueNameTaskId:["queueName","taskId"]},auto_increment:!0},{name:"network_requests",id:3,primary_key:["taskQueueName","syncDatabaseId"]},{name:"_user_info",id:4,primary_key:["id"]},{name:"pending_fire_and_forget_tasks",id:5,primary_key:["taskId"],auto_increment:!0},{name:"user_visible_errors",id:6,primary_key:["errorId"],auto_increment:!0},{name:"mailbox_task_completion_notification_context",id:232,primary_key:["notificationScopeKey"]},{name:"mailbox_task_completion_api_tasks",id:233,primary_key:["taskId"]}],[{name:"contacts",id:7,primary_key:["id"],indexes:{blockedByViewerStatusId:["blockedByViewerStatus","id"]}},{name:"ig_contact_info",id:176,primary_key:["contactId"]},{name:"work_contact_info",id:210,primary_key:["id"]},{name:"contextual_profile_v1",id:216,primary_key:["ownerId","associatedEntityId"]},{name:"fb_transport_contacts",id:240,primary_key:["pk"]}],[{name:"reactions",id:8,primary_key:["threadKey","messageId","actorId"]},{name:"threads",id:9,primary_key:["threadKey"],indexes:{lastActivityTimestampMs:["lastActivityTimestampMs","threadKey"],parentThreadKeyLastActivityTimestampMs:["parentThreadKey","lastActivityTimestampMs","threadKey"],clientThreadKey:["clientThreadKey","threadKey"],threadTypeLastActivityTimestampMs:["threadType","lastActivityTimestampMs","threadKey"]}},{name:"threads_ranges_v2__generated",id:10,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"]},{name:"messages",id:12,primary_key:["threadKey","timestampMs","messageId"],indexes:{optimistic:["offlineThreadingId"],messageDisplayOrder:["threadKey","primarySortKey","secondarySortKey","messageId"],messageId:["messageId"]}},{name:"messages_ranges_v2__generated",id:13,primary_key:["threadKey","minTimestampMs","minMessageId"]},{name:"participants",id:14,primary_key:["threadKey","contactId"],indexes:{threadKeyReadWatermarkTimestampMs:["threadKey","readWatermarkTimestampMs","contactId"],threadKeyDeliveredWatermarkTimestampMs:["threadKey","deliveredWatermarkTimestampMs","contactId"]}},{name:"ctas",id:15,primary_key:["ctaId"]},{name:"attachments",id:16,primary_key:["threadKey","messageId","attachmentFbid"],indexes:{fk_messages:["threadKey","timestampMs","messageId","attachmentFbid"]}},{name:"attachments_ranges_v2__generated",id:17,primary_key:["threadKey","mediaGroup","minTimestampMs"]},{name:"attachment_items",id:18,primary_key:["attachmentFbid","attachmentIndex"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","attachmentIndex"]}},{name:"attachment_ctas",id:19,primary_key:["ctaId"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","ctaId"]}},{name:"quick_reply_ctas",id:20,primary_key:["threadKey","messageId","ctaId"]},{name:"m_suggestions",id:21,primary_key:["threadKey","timestampMs","suggestionId"]},{name:"rtc_signals",id:22,primary_key:["timestampMs","type_"]},{name:"rtc_ongoing_calls_on_threads_v2",id:23,primary_key:["threadKey"]},{name:"rtc_multiway_call_initiation_conference_names",id:24,primary_key:["threadKey"]},{name:"mailbox_metadata",id:25,primary_key:["id"]},{name:"group_membership_approval_requests",id:26,primary_key:["threadKey","contactId"]},{name:"admin_message_ctas",id:27,primary_key:["threadKey","messageId","ctaId"],indexes:{ctaId:["ctaId"]}},{name:"thread_nullstate",id:28,primary_key:["threadKey"]},{name:"thread_nullstate_ctas",id:29,primary_key:["ctaId"],indexes:{threadKeyCtaId:["threadKey","ctaId"]}},{name:"focus_mode_ctas",id:30,primary_key:["threadKey","messageId","ctaId"]},{name:"messages_optimistic_context",id:31,primary_key:["taskId"]},{name:"threads_optimistic_context",id:32,primary_key:["taskId"]},{name:"messages_status",id:33,primary_key:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"]},{name:"message_requests",id:34,primary_key:["threadKey"]},{name:"folder_metadata",id:35,primary_key:["parentThreadKey"]},{name:"polls",id:38,primary_key:["pollId"]},{name:"poll_options_v2",id:39,primary_key:["pollId","optionId"]},{name:"poll_votes_v2",id:40,primary_key:["pollId","optionId","contactId"]},{name:"pinned_messages_v2",id:155,primary_key:["threadKey","messageId"]},{name:"filtered_threads_ranges_v3__generated",id:247,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"]},{name:"community_folders",id:162,primary_key:["folderId"]},{name:"community_members",id:170,primary_key:["communityId","contactId","source"],indexes:{communityContactId:["communityId","contactId","source"],communitySource:["communityId","source","name","contactId"]}},{name:"community_members_ranges_v2__generated",id:189,primary_key:["communityId","isAdmin","minName","source"]},{name:"attachment_conversion",id:164,primary_key:["attachmentFbid"]},{name:"saved_messages",id:165,primary_key:["threadKey","messageId"]},{name:"rtc_rooms_on_threads",id:181,primary_key:["threadKey"]},{name:"ig_thread_info",id:194,primary_key:["threadKey"]},{name:"group_invites",id:197,primary_key:["threadKey","inviterId","inviteeId"],indexes:{threadKeyInviterIDInviteeID:["threadKey","inviterId","inviteeId"]}},{name:"inbox_threads_ranges",id:198,primary_key:["syncGroup"]},{name:"community_direct_invites_presets",id:199,primary_key:["communityId","presetType","source"]},{name:"msg_pinned_messages_v2",id:205,primary_key:["threadKey","messageId","pinnedTimestampMs"],indexes:{pinnedMessageDisplayOrder:["threadKey","pinnedTimestampMs","messageId"]}},{name:"filtered_messages_ranges_v2__generated",id:211,primary_key:["threadKey","mailboxType","minTimestampMs","minMessageId","messageRangeFilter"]},{name:"taken_down_threads",id:212,primary_key:["threadKey"]},{name:"participant_list_queries",id:219,primary_key:["threadKey"]},{name:"sync_group_threads_ranges",id:220,primary_key:["syncGroup","parentThreadKey"]},{name:"community_chat_message_seen_count",id:221,primary_key:["threadKey","messageId"]},{name:"community_chat_polls",id:223,primary_key:["pollId"]},{name:"community_chat_poll_options",id:224,primary_key:["pollId","optionId"]},{name:"community_chat_poll_votes",id:225,primary_key:["pollId","optionId","contactId"]},{name:"reactions_v2",id:226,primary_key:["threadKey","messageId","reactionFbid","messageTimestamp"],indexes:{optimistic:["threadKey","messageId","reactionFbid"]}},{name:"reactions_v2_details_users",id:227,primary_key:["reactorId","reactionFbid"]},{name:"reactions_v2_details_users_ranges_v2__generated",id:228,primary_key:["reactorId","reactionFbid","minTimestampMs"]},{name:"reaction_v2_types",id:229,primary_key:["reactionFbid"]},{name:"bots",id:230,primary_key:["threadKey","botId"]},{name:"business_comm_items",id:234,primary_key:["threadKey","entId"]},{name:"group_invitations_pending",id:235,primary_key:["linkHash"]},{name:"business_support_notification_settings",id:236,primary_key:["userId"]},{name:"thread_label_mappings",id:237,primary_key:["threadKey","labelId"]},{name:"audio_channel_events",id:238,primary_key:["eventId","roomId"]},{name:"reactions_v2_details",id:239,primary_key:["threadId","messageId","reactorId","reactionFbid"]},{name:"reactions_v2_details_ranges_v2__generated",id:243,primary_key:["threadId","messageId","reactionFbid","minTimestampMs"]},{name:"community_chat_poll_votes_ranges_v2__generated",id:244,primary_key:["pollId","optionId","minTimestampMs"]}],[{name:"media_send_jobs",id:51,primary_key:["offlineAttachmentId"]}],[{name:"typing_indicator",id:52,primary_key:["threadKey","senderId"]}],[{name:"server_search_results",id:65,primary_key:["query","resultId","globalIndex"]},{name:"server_search_sections",id:66,primary_key:["query","globalIndex"]},{name:"search_queries",id:67,primary_key:["query"]},{name:"universal_search_recent_searches",id:68,primary_key:["resultId"]},{name:"message_search_results",id:69,primary_key:["type_","query","threadKey","globalIndex"]},{name:"message_search_queries",id:70,primary_key:["type_","query","threadKeyV2"]},{name:"participant_search_queries",id:214,primary_key:["query","threadKey"]}],[{name:"contact_upload_settings",id:74,primary_key:["userid"]},{name:"gdpr_settings",id:75,primary_key:["userid"]},{name:"presence_settings",id:187,primary_key:["userId"]},{name:"persistent_menu_items",id:77,primary_key:["threadKey","ctaId"]},{name:"video_chat_links_joining",id:78,primary_key:["url","optimisticClientToken"],indexes:{optimistic:["optimisticClientToken"]}},{name:"video_chat_links_attempted_joiners",id:79,primary_key:["userId","url"]},{name:"cowatch_sessions",id:80,primary_key:["cowatchSessionId"]},{name:"self_profile",id:81,primary_key:["userId"]},{name:"pinned_threads",id:82,primary_key:["threadKey"],indexes:{pinnedTimestamp:["pinnedTimestamp","threadKey"]}},{name:"messaging_settings",id:83,primary_key:["id"]},{name:"reachability_settings",id:148,primary_key:["audience"]},{name:"feature_limits",id:150,primary_key:["type_"]},{name:"emoji_sets",id:151,primary_key:["categoryIdx","emojiIdx","type_"]},{name:"epd_cookie_settings",id:163,primary_key:[]},{name:"cm_community_list",id:166,primary_key:["communityId"]},{name:"cm_channel_list",id:167,primary_key:["communityId","threadId"]},{name:"cm_category_list",id:182,primary_key:["communityId","categoryId"]},{name:"notification_settings",id:175,primary_key:["id"]},{name:"encrypted_backups_status_trigger",id:195,primary_key:["pk"],auto_increment:!0},{name:"fb_events",id:200,primary_key:["eventId"]},{name:"cm_channel_events",id:201,primary_key:["eventId","threadId"]},{name:"community_events",id:202,primary_key:["eventId","communityId"]},{name:"avatar_settings",id:209,primary_key:["threadId"]},{name:"thread_labels",id:215,primary_key:["labelId"],indexes:{sortKey:["sortKey"]}},{name:"business_support_case_details",id:222,primary_key:["threadId"]},{name:"rtc_call_events",id:245,primary_key:["pk"],auto_increment:!0}],[{name:"payment_type_paypal",id:85,primary_key:["paymentCredentialId"]},{name:"payment_type_card",id:86,primary_key:["paymentCredentialId"]},{name:"payment_type_bank_v2",id:88,primary_key:["paymentMethodId"]},{name:"payment_method",id:89,primary_key:["paymentMethodId"]},{name:"new_payment_credential_option",id:90,primary_key:["credentialType"]},{name:"paypal_funding_options",id:91,primary_key:["optionId"]},{name:"payments_eligibility",id:92,primary_key:["userId"]},{name:"payments_ofac_blacklisted_countries",id:93,primary_key:["isoCountryCode"]},{name:"p2m_invoice",id:94,primary_key:["orderId"]},{name:"p2m_invoice_attachment",id:95,primary_key:["orderId","productItemId"]},{name:"payment_price_list_item",id:96,primary_key:["orderId","id"]},{name:"p2m_charge",id:97,primary_key:["orderId"]},{name:"payment_p2p_risk_verification",id:98,primary_key:["requestId","transactionId"]},{name:"payment_transaction_v2",id:99,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_request_v2",id:100,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_transfer_v2",id:101,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"transaction_history",id:102,primary_key:["transactionId"]},{name:"payments_transaction_details_core",id:103,primary_key:["transactionId"]},{name:"payments_transaction_details_ctas",id:104,primary_key:["transactionId","ctaId"]},{name:"payments_transaction_details_rows",id:105,primary_key:["transactionId","rowOrder"]},{name:"payment_user_auth",id:106,primary_key:["userId"]},{name:"payment_client_auth_token",id:107,primary_key:["userId","deviceId","appId"]},{name:"payment_auth_request_results",id:108,primary_key:["requestId"]},{name:"payment_server_request_results",id:109,primary_key:["requestId"]},{name:"payment_pin_verification_results",id:113,primary_key:["requestId"]}],[{name:"connectivity_status",id:114,primary_key:["statusId"],auto_increment:!0},{name:"user_visible_network_connectivity_error",id:115,primary_key:["statusId"],auto_increment:!0}],[{name:"thread_themes",id:116,primary_key:["fbid"]},{name:"gradient_colors",id:117,primary_key:["themeFbid","gradientIndex"]}],[{name:"in_thread_banner",id:118,primary_key:["threadKey","bannerId"]},{name:"in_thread_banner_ctas",id:119,primary_key:["bannerId","ctaId"]},{name:"in_thread_banner_overflow_menu",id:120,primary_key:["threadKey","bannerId"]}],[{name:"stickers",id:121,primary_key:["stickerId"],indexes:{stickerPackId:["stickerPackId","stickerId"]}},{name:"sticker_packs",id:122,primary_key:["packId"]},{name:"sticker_search_results",id:123,primary_key:["resultIndex","query"]},{name:"sticker_search_queries",id:124,primary_key:["query"]},{name:"sticker_search_featured_tags",id:125,primary_key:["tagIndex"]},{name:"sticker_to_collection",id:126,primary_key:["stickerId","collectionId"]},{name:"sticker_pack_details",id:127,primary_key:["packId"]},{name:"sticker_store_pack_indices",id:128,primary_key:["packId"]}],[{name:"forward_content",id:129,primary_key:["value","type_"]}],[{name:"linked_groups",id:130,primary_key:["id"],indexes:{threadKey:["threadKey"]}}],[{name:"ranking_scores",id:134,primary_key:["contactId","scoreType"],indexes:{scoreTypeContactId:["scoreType","contactId"]}},{name:"ranking_requests",id:135,primary_key:["scoreType"]},{name:"value_model_rules",id:136,primary_key:["product","ruleIndex"]},{name:"value_model_features",id:137,primary_key:["feature"]},{name:"value_model_output",id:138,primary_key:["product","contactId"]}],[{name:"story_buckets",id:53,primary_key:["bucketId"],indexes:{optimistic:["ownerId","bucketType"]}},{name:"stories",id:54,primary_key:["storyId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_viewers",id:55,primary_key:["storyId","viewerContactId","interactionType"]},{name:"story_reactions",id:56,primary_key:["reactionId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_ad_unit",id:57,primary_key:["adPosition","clientToken"]},{name:"story_ad_card",id:58,primary_key:["adPosition","clientToken","cardId"]},{name:"story_ad_ctas",id:59,primary_key:["ctaId"]},{name:"story_overlays",id:60,primary_key:["storyId","storyOverlayId"]},{name:"story_buckets_paginated_queries",id:61,primary_key:["queryId"]},{name:"status",id:62,primary_key:["statusId"],indexes:{optimistic:["optimisticClientId"]}},{name:"rooms",id:63,primary_key:["roomId"],indexes:{optimistic:["optimisticClientToken"]}},{name:"room_participants",id:64,primary_key:["roomId","participantId","type_"],indexes:{optimistic:["roomId","participantId"]}}],[{name:"live_location_sharers",id:149,primary_key:["threadKey","userId"]}],[{name:"mi_act_mapping_table",id:173,primary_key:["serverThreadKey","clientThreadPk","jid"],indexes:{fk_threads:["serverThreadKey"],chat_id:["clientThreadPk"],jid:["jid"]}},{name:"media_staging",id:161,primary_key:["offlineAttachmentId"]}],[{name:"data_trace_meta",id:153,primary_key:["traceId"],indexes:{shouldFlushInitTimestampMsTraceId:["shouldFlush","initTimestampMs","traceId"]}},{name:"data_trace_addon",id:154,primary_key:["addonId"],indexes:{traceIdAddonId:["traceId","addonId"]},auto_increment:!0}],[{name:"ad_context",id:160,primary_key:["adId"]}],[{name:"thread_proactive_warning_settings",id:183,primary_key:["threadKey"]},{name:"client_thread_proactive_warning_settings",id:241,primary_key:["threadPk"]}],[{name:"presence_states",id:186,primary_key:["contactId"],indexes:{statusContactId:["status","contactId"]}}],[{name:"available_reactions",id:188,primary_key:["emojiIdx"]}],[{name:"pending_backups_context_v2",id:177,primary_key:["pk"],indexes:{fk_pending_tasks:["pendingBackupTaskId"]},auto_increment:!0},{name:"secure_encrypted_backups_client_state",id:168,primary_key:["backupId"]},{name:"encrypted_backups_debug_metadata",id:206,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata",id:207,primary_key:["epochId"]},{name:"encrypted_backups_debug_metadata_v2",id:217,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata_v2",id:218,primary_key:["epochId"]},{name:"secure_encrypted_backups_epochs",id:169,primary_key:["epochId"],indexes:{fk_secure_encrypted_backups_client_state:["backupId","epochId"]}},{name:"encrypted_backups",id:172,primary_key:["pk"],auto_increment:!0},{name:"secure_encrypted_backups_generated_recovery_code",id:174,primary_key:["pk"]},{name:"secure_encrypted_backups_recovery_code_status",id:178,primary_key:["pk"]},{name:"secure_recovery_code_data",id:179,primary_key:["taskId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"secure_encrypted_backups_message_thread_id_context",id:180,primary_key:["taskId","listId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"encrypted_backups_virtual_devices",id:184,primary_key:["pk"],auto_increment:!0},{name:"encrypted_backups_metadata",id:196,primary_key:["backupId"]},{name:"device_metadata",id:185,primary_key:["pk"]},{name:"encrypted_backup_restore_task_payload_context",id:190,primary_key:["taskId"]},{name:"encrypted_backups_dyi_backup_restore_status",id:208,primary_key:["pk"]},{name:"encrypted_backups_message_backup_status",id:213,primary_key:["messagePk"]},{name:"encrypted_backups_client_restore_status",id:231,primary_key:["threadId"]},{name:"third_party_id_store",id:242,primary_key:["platform"]}],[{name:"secure_encrypted_backups_devices",id:191,primary_key:["deviceId"]},{name:"secure_encrypted_backups_device_supported_versions",id:192,primary_key:["deviceId","supportedVersion"],indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:["deviceId","supportedVersion"]}}],[{name:"e2ee_dummy_table_for_sync",id:171,primary_key:["placeholder"]},{name:"cutover_threads",id:193,primary_key:["openThreadId"]}],[{name:"community_messaging_aggregated_user_presence_counts_for_community",id:203,primary_key:["folderId"]},{name:"community_messaging_aggregated_copresence_counts_for_chat",id:204,primary_key:["threadId"]}],[{name:"workrooms_co_presence_states",id:246,primary_key:["userId"],indexes:{userCoPresence:["userId","coPresenceObjectId"]}}]]}),null);
__d("LSIntEnum",["I64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("I64").of_float(a)}function b(a){return d("I64").to_float(a)}g.ofNumber=a;g.toNumber=b}),98);
__d("BPlusTreeBase",["justknobx","regeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=(d=b("regeneratorRuntime")).mark(q),i=d.mark(r),j=d.mark(v),k=d.mark(w),l=d.mark(x),m=d.mark(y),n=d.mark(z),o=d.mark(A),p={gte:[!0,0],lt:[!0,1],gt:[!1,0],lte:[!1,1]};function q(a){var c,d,e,f,g,i,j,k,l,m,n,o;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:return b.delegateYield(a.readHeader(),"t0",1);case 1:c=b.t0;if(!(c==null||c.rootId==null||c.headId==null)){b.next=4;break}return b.abrupt("return");case 4:return b.delegateYield(a.readExn(c.rootId),"t1",5);case 5:d=b.t1,e=[{node:d,id:c.rootId}];case 7:if(!(e.length>0)){b.next=30;break}f=e.shift(),g=f.id,i=f.node;if(i.isLeaf){b.next=27;break}j=i.children,k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 11:if(!k){b.next=17;break}if(!(l>=j.length)){b.next=14;break}return b.abrupt("break",27);case 14:m=j[l++];b.next=21;break;case 17:l=j.next();if(!l.done){b.next=20;break}return b.abrupt("break",27);case 20:m=l.value;case 21:n=m;return b.delegateYield(a.read(n),"t2",23);case 23:o=b.t2,o!=null&&e.push({node:o,id:n});case 25:b.next=11;break;case 27:return b.delegateYield(a.remove(g),"t3",28);case 28:b.next=7;break;case 30:return b.delegateYield(a.removeHeader(),"t4",31);case 31:case"end":return b.stop()}},h,this)}function r(a,c,d,e){var f,g,h,j,k;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:return b.delegateYield(c.readExn(d),"t0",1);case 1:f=b.t0,g=[],(h=f,j=d),k=-1;case 5:if(h.isLeaf){b.next=14;break}g.push([h,j,k]);k=s(a,h.keys,e,p.gt);k===-1&&(k=h.keys.length);j=h.children[k];return b.delegateYield(c.readExn(j),"t1",11);case 11:h=b.t1;b.next=5;break;case 14:return b.abrupt("return",[h,j,g,k]);case 15:case"end":return b.stop()}},i,this)}function s(a,b,c,d){var e=0,f=b.length-1;while(e<=f){var g=e+f>>1;(d[0]?a(b[g],c)<0:a(b[g],c)<=0)?e=g+1:f=g-1}g=[e,f][d[1]];return g===b.length?-1:g}function t(a,b,c){if(!b.length)return[0,0];var d=s(a,b,c,p.gte);if(d===-1)return[b.length,0];else if(a(b[d],c)===0)return[d,1];return[d,0]}function u(a,b,c){for(var d=arguments.length,e=new Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];return[].concat(a.slice(0,b),e,a.slice(b+c))}function v(a){var c,d;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:return b.delegateYield(a.readHeader(),"t0",1);case 1:c=b.t0;if(!(c==null)){b.next=7;break}return b.delegateYield(a.writeNew({isLeaf:!0,children:[],keys:[]}),"t1",4);case 4:d=b.t1;c={rootId:d,tailId:d,headId:d};return b.delegateYield(a.writeHeader(c),"t2",7);case 7:return b.abrupt("return",c);case 8:case"end":return b.stop()}},j,this)}function w(a,d,e){var f,g,h;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:b.t0=r;b.t1=a;b.t2=d;return b.delegateYield(v(d),"t3",4);case 4:b.t4=b.t3.rootId;b.t5=e;return b.delegateYield(b.t0(b.t1,b.t2,b.t4,b.t5),"t6",7);case 7:f=b.t6;g=f[0];h=s(a,g.keys,e,p.gte);if(!(h===-1||a(g.keys[h],e)!==0)){b.next=12;break}throw c("unrecoverableViolation")("key not found: "+String(e),"messenger_web_product");case 12:return b.abrupt("return",g.children[h]);case 13:case"end":return b.stop()}},k,this)}function x(a,c,d,e){var f,g,h;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:b.t0=r;b.t1=a;b.t2=c;return b.delegateYield(v(c),"t3",4);case 4:b.t4=b.t3.rootId;b.t5=d;return b.delegateYield(b.t0(b.t1,b.t2,b.t4,b.t5),"t6",7);case 7:f=b.t6;g=f[0];h=s(a,g.keys,d,p.gte);if(!(h===-1||a(g.keys[h],d)!==0)){b.next=12;break}return b.abrupt("return",e);case 12:return b.abrupt("return",g.children[h]);case 13:case"end":return b.stop()}},l,this)}function y(a,c,d){var e,f,g;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:b.t0=r;b.t1=a;b.t2=c;return b.delegateYield(v(c),"t3",4);case 4:b.t4=b.t3.rootId;b.t5=d;return b.delegateYield(b.t0(b.t1,b.t2,b.t4,b.t5),"t6",7);case 7:e=b.t6;f=e[0];g=s(a,f.keys,d,p.gte);return b.abrupt("return",g!==-1&&a(f.keys[g],d)===0);case 11:case"end":return b.stop()}},m,this)}function z(a,c,d,e,f){var g,h,i,j,k,l,m,o,p,q,s,w,x,y,z,A,B,C,D;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:return b.delegateYield(v(c),"t0",1);case 1:g=b.t0;h={};return b.delegateYield(r(a,c,g.rootId,e),"t1",4);case 4:i=b.t1,j=i[0],k=i[1],l=i[2],(m=t(a,j.keys,e),o=m[0],p=m[1]),(q=babelHelpers["extends"]({},j,{children:u(j.children,o,p,f),keys:p===1?j.keys:u(j.keys,o,p,e)}),s=k);case 10:if(!(q.keys.length>=d)){b.next=44;break}y=l.pop()||[{keys:[],children:[s],isLeaf:!1}];w=y[0];x=y[1];z=Math.floor(q.keys.length/2);A=void 0,B=void 0;if(!q.isLeaf){b.next=35;break}A={isLeaf:!0,children:q.children.slice(z),keys:q.keys.slice(z),nextId:q.nextId,prevId:s};return b.delegateYield(c.writeNew(A),"t2",19);case 19:B=q.nextId=b.t2;if(!A.nextId){b.next=32;break}b.t3=c;b.t4=A.nextId;b.t5=babelHelpers;b.t6={};return b.delegateYield(c.readExn(A.nextId),"t7",26);case 26:b.t8=b.t7;b.t9={prevId:B};b.t10=b.t5["extends"].call(b.t5,b.t6,b.t8,b.t9);return b.delegateYield(b.t3.write.call(b.t3,b.t4,b.t10),"t11",30);case 30:b.next=33;break;case 32:h.tailId=B;case 33:b.next=38;break;case 35:A={isLeaf:!1,children:q.children.slice(z+1),keys:q.keys.slice(z+1)};return b.delegateYield(c.writeNew(A),"t12",37);case 37:B=b.t12;case 38:C=t(a,w.keys,q.keys[z]),D=C[0];w=babelHelpers["extends"]({},w,{keys:u(w.keys,D,0,q.keys[z]),children:u(w.children,D+1,0,B)});return b.delegateYield(c.write(s,babelHelpers["extends"]({},q,{keys:q.keys.slice(0,z),children:q.children.slice(0,z+(q.isLeaf?0:1))})),"t13",41);case 41:q=w,s=x;b.next=10;break;case 44:if(!(s==null)){b.next=49;break}return b.delegateYield(c.writeNew(q),"t14",46);case 46:h.rootId=b.t14;b.next=50;break;case 49:return b.delegateYield(c.write(s,q),"t15",50);case 50:if(!Object.keys(h).length){b.next=52;break}return b.delegateYield(c.writeHeader(babelHelpers["extends"]({},g,h)),"t16",52);case 52:case"end":return b.stop()}},n,this)}function A(a,d,e,f){var g,h,i,j,k,l,m,n,q,t,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:return b.delegateYield(v(d),"t0",1);case 1:g=b.t0;h={};i=Math.floor(e/2);return b.delegateYield(r(a,d,g.rootId,f),"t1",5);case 5:j=b.t1;k=j[0];l=j[1];m=j[2];n=j[3];q=s(a,k.keys,f,p.gte);if(!(q===-1||a(k.keys[q],f)!==0)){b.next=13;break}return b.abrupt("return",!1);case 13:t=babelHelpers["extends"]({},k,{keys:u(k.keys,q,1),children:u(k.children,q,1)});w=l;return b.delegateYield(d.write(w,t),"t2",16);case 16:x=n;case 17:if(!(t.keys.length<i&&m.length)){b.next=104;break}C=m.pop();y=C[0];z=C[1];A=C[2];D=[[{nodeId:y.children[x-1]},{nodeId:w,node:t},x-1],[{nodeId:w,node:t},{nodeId:y.children[x+1]},x]].filter(function(a){var b=a[0];a=a[1];return b.nodeId!==void 0&&a.nodeId!==void 0});E=D,F=Array.isArray(E),G=0,E=F?E:E[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 24:if(!F){b.next=30;break}if(!(G>=E.length)){b.next=27;break}return b.abrupt("break",58);case 27:H=E[G++];b.next=34;break;case 30:G=E.next();if(!G.done){b.next=33;break}return b.abrupt("break",58);case 33:H=G.value;case 34:I=H;J=I[0];K=I[1];L=I[2];b.t3=J.node;if(b.t3){b.next=42;break}return b.delegateYield(d.readExn(J.nodeId),"t4",41);case 41:b.t3=b.t4;case 42:J.node=b.t3;b.t5=K.node;if(b.t5){b.next=47;break}return b.delegateYield(d.readExn(K.nodeId),"t6",46);case 46:b.t5=b.t6;case 47:K.node=b.t5;if(!(J.node.keys.length+K.node.keys.length>=i*2)){b.next=56;break}t.isLeaf?(K.node=babelHelpers["extends"]({},K.node,{children:[].concat(J.node.children,K.node.children),keys:[].concat(J.node.keys,K.node.keys)}),J.node=babelHelpers["extends"]({},J.node,{children:K.node.children.splice(0,i),keys:K.node.keys.splice(0,i)}),y=babelHelpers["extends"]({},y,{keys:u(y.keys,L,1,K.node.keys[0])})):(K.node=babelHelpers["extends"]({},K.node,{children:[].concat(J.node.children,K.node.children),keys:[].concat(J.node.keys,[y.keys[L]],K.node.keys)}),J.node=babelHelpers["extends"]({},J.node,{children:K.node.children.splice(0,i+1)}),y=babelHelpers["extends"]({},y,{keys:u(y.keys,L,1,K.node.keys.splice(i,1)[0])}),J.node.keys=K.node.keys.splice(0,i));return b.delegateYield(d.write(J.nodeId,J.node),"t7",51);case 51:return b.delegateYield(d.write(K.nodeId,K.node),"t8",52);case 52:return b.delegateYield(d.write(z,y),"t9",53);case 53:if(!Object.keys(h).length){b.next=55;break}return b.delegateYield(d.writeHeader(babelHelpers["extends"]({},g,h)),"t10",55);case 55:return b.abrupt("return",!0);case 56:b.next=24;break;case 58:M=D,N=Array.isArray(M),O=0,M=N?M:M[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 59:if(!N){b.next=65;break}if(!(O>=M.length)){b.next=62;break}return b.abrupt("break",101);case 62:P=M[O++];b.next=69;break;case 65:O=M.next();if(!O.done){b.next=68;break}return b.abrupt("break",101);case 68:P=O.value;case 69:Q=P;R=Q[0];S=Q[1];T=Q[2];R.node=babelHelpers["extends"]({},R.node,{children:[].concat(R.node.children,S.node.children)});if(!t.isLeaf){b.next=92;break}R.node.keys=[].concat(R.node.keys,S.node.keys);if(!S.node.nextId){b.next=88;break}b.t11=d;b.t12=S.node.nextId;b.t13=babelHelpers;b.t14={};return b.delegateYield(d.readExn(S.node.nextId),"t15",82);case 82:b.t16=b.t15;b.t17={prevId:R.nodeId};b.t18=b.t13["extends"].call(b.t13,b.t14,b.t16,b.t17);return b.delegateYield(b.t11.write.call(b.t11,b.t12,b.t18),"t19",86);case 86:b.next=89;break;case 88:h.tailId=R.nodeId;case 89:R.node.nextId=S.node.nextId;b.next=93;break;case 92:R.node.keys=[].concat(R.node.keys,[y.keys[T]],S.node.keys);case 93:y=babelHelpers["extends"]({},y,{keys:u(y.keys,T,1),children:u(y.children,T+1,1)});if(!c("justknobx")._("672")){b.next=96;break}return b.delegateYield(d.write(z,y),"t20",96);case 96:return b.delegateYield(d.write(R.nodeId,R.node),"t21",97);case 97:return b.delegateYield(d.remove(S.nodeId),"t22",98);case 98:return b.abrupt("break",101);case 99:b.next=59;break;case 101:B=[y,z,A],t=B[0],w=B[1],x=B[2],B;b.next=17;break;case 104:return b.delegateYield(d.write(w,t),"t23",105);case 105:return b.delegateYield(d.readExn(g.rootId),"t24",106);case 106:U=b.t24;if(!(!U.keys.length&&U.children.length)){b.next=112;break}if(!U.isLeaf){b.next=110;break}throw c("unrecoverableViolation")("cannot be leaf","messenger_web_product");case 110:return b.delegateYield(d.remove(g.rootId),"t25",111);case 111:h.rootId=U.children[0];case 112:if(!Object.keys(h).length){b.next=114;break}return b.delegateYield(d.writeHeader(babelHelpers["extends"]({},g,h)),"t26",114);case 114:return b.abrupt("return",!0);case 115:case"end":return b.stop()}},o,this)}function B(a,d,e){e=e===void 0?{}:e;var f=e.dir,g=f===void 0?"asc":f,h=babelHelpers.objectWithoutPropertiesLoose(e,["dir"]);function i(){if(g==="asc"){if(Object.prototype.hasOwnProperty.call(h,"gt"))return h.gt;else if(Object.prototype.hasOwnProperty.call(h,"gte"))return h.gte}else if(Object.prototype.hasOwnProperty.call(h,"lt"))return h.lt;else if(Object.prototype.hasOwnProperty.call(h,"lte"))return h.lte}function j(b){if(g==="asc")return Object.prototype.hasOwnProperty.call(h,"gt")?s(a,b.keys,h.gt,p.gt):Object.prototype.hasOwnProperty.call(h,"gte")?s(a,b.keys,h.gte,p.gte):0;else return Object.prototype.hasOwnProperty.call(h,"lt")?s(a,b.keys,h.lt,p.lt):Object.prototype.hasOwnProperty.call(h,"lte")?s(a,b.keys,h.lte,p.lte):b.keys.length-1}if(Object.prototype.hasOwnProperty.call(h,"gt")&&Object.prototype.hasOwnProperty.call(h,"gte"))throw c("unrecoverableViolation")("cannot specify both greater than and greater than or equal","messenger_web_product");if(Object.prototype.hasOwnProperty.call(h,"lt")&&Object.prototype.hasOwnProperty.call(h,"lte"))throw c("unrecoverableViolation")("cannot specify both less than and less than or equal","messenger_web_product");var k;return{next:b("regeneratorRuntime").mark(function e(f){var l,m,n,o,q,t,u,w,x,y,z,A,B;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:if(!(k==null)){b.next=29;break}return b.delegateYield(v(d),"t0",2);case 2:q=b.t0;t=i();if(!(t!=null)){b.next=11;break}return b.delegateYield(r(a,d,q.rootId,t),"t1",6);case 6:u=b.t1;m=u[0];n=u[1];b.next=26;break;case 11:if(!(g==="asc")){b.next=20;break}return b.delegateYield(d.readExn(q.headId),"t2",13);case 13:b.t3=b.t2;b.t4=q.headId;w=[b.t3,b.t4];m=w[0];n=w[1];b.next=26;break;case 20:return b.delegateYield(d.readExn(q.tailId),"t5",21);case 21:b.t6=b.t5,b.t7=q.tailId,x=[b.t6,b.t7],m=x[0],n=x[1];case 26:l=j(m);b.next=66;break;case 29:y=k;l=y.i;o=y.key;n=y.nodeId;return b.delegateYield(d.read(n),"t8",34);case 34:m=b.t8;if(!(f!=null)){b.next=52;break}if(!(a(f,o)===(g==="asc"?-1:1))){b.next=38;break}throw c("unrecoverableViolation")("key must be ahead of current key","messenger_web_product");case 38:if(!(m==null||a(f,m.keys[0])<0||a(f,m.keys[m.keys.length-1])>0)){b.next=49;break}b.t9=r;b.t10=a;b.t11=d;return b.delegateYield(v(d),"t12",43);case 43:b.t13=b.t12.rootId;b.t14=f;return b.delegateYield(b.t9(b.t10,b.t11,b.t13,b.t14),"t15",46);case 46:z=b.t15,m=z[0],n=z[1];case 49:l=s(a,m.keys,f,p[g==="asc"?"gte":"lte"]);b.next=66;break;case 52:if(!(m==null||l<0||l>=m.keys.length||a(m.keys[l],o)!==0)){b.next=65;break}if(!(m==null||!m.keys.length||a(o,m.keys[0])<0||a(o,m.keys[m.keys.length-1])>0)){b.next=64;break}b.t16=r;b.t17=a;b.t18=d;return b.delegateYield(v(d),"t19",58);case 58:b.t20=b.t19.rootId;b.t21=o;return b.delegateYield(b.t16(b.t17,b.t18,b.t20,b.t21),"t22",61);case 61:A=b.t22,m=A[0],n=A[1];case 64:l=s(a,m.keys,o,p[g==="asc"?"lte":"gte"]);case 65:l+=g==="asc"?1:-1;case 66:if(!(l<0||l>=m.keys.length)){b.next=82;break}if(!(g==="asc")){b.next=76;break}if(!(m.nextId===void 0)){b.next=70;break}return b.abrupt("return",{done:!0});case 70:n=m.nextId;return b.delegateYield(d.readExn(n),"t23",72);case 72:m=b.t23;l=0;b.next=82;break;case 76:if(!(m.prevId===void 0)){b.next=78;break}return b.abrupt("return",{done:!0});case 78:n=m.prevId;return b.delegateYield(d.readExn(n),"t24",80);case 80:m=b.t24,l=m.keys.length-1;case 82:o=m.keys[l];k={node:m,nodeId:n,key:o,i:l};if(!(l<0||l>=m.keys.length)){b.next=86;break}return b.abrupt("return",{done:!0});case 86:B=g==="asc"?Object.prototype.hasOwnProperty.call(h,"lt")&&a(o,h.lt)>=0||Object.prototype.hasOwnProperty.call(h,"lte")&&a(o,h.lte)>0:Object.prototype.hasOwnProperty.call(h,"gt")&&a(o,h.gt)<=0||Object.prototype.hasOwnProperty.call(h,"gte")&&a(o,h.gte)<0;if(!B){b.next=89;break}return b.abrupt("return",{done:!0});case 89:return b.abrupt("return",{done:!1,value:[m.keys[l],m.children[l]]});case 90:case"end":return b.stop()}},e,this)})}}function a(a,b,c){b===void 0&&(b=32);return{get:function(b){return w(a,c,b)},getWithDefault:function(b,d){return x(a,c,b,d)},has:function(b){return y(a,c,b)},set:function(d,e){return z(a,c,b,d,e)},"delete":function(d){return A(a,c,b,d)},entries:function(b){return B(a,c,b)},clear:function(){return q(c)}}}g["default"]=a}),98);
__d("BPlusTree",["BPlusTreeBase","regeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a,d={},e=void 0,f=0;return{read:(a=b("regeneratorRuntime")).mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",d[c]);case 1:case"end":return a.stop()}},a,this)}),readExn:a.mark(function a(e){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(!Object.prototype.hasOwnProperty.call(d,e)){a.next=4;break}return a.abrupt("return",d[e]);case 4:throw c("unrecoverableViolation")("expected key","messenger_web_product");case 5:case"end":return a.stop()}},a,this)}),readHeader:a.mark(function a(){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",e);case 1:case"end":return a.stop()}},a,this)}),remove:a.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:delete d[c];case 1:case"end":return a.stop()}},a,this)}),removeHeader:a.mark(function a(){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:e=void 0;case 1:case"end":return a.stop()}},a,this)}),write:a.mark(function a(c,e){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:d[c]=e;case 1:case"end":return a.stop()}},a,this)}),writeHeader:a.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:e=c;case 1:case"end":return a.stop()}},a,this)}),writeNew:a.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:d[f++]=c;return a.abrupt("return",f-1);case 2:case"end":return a.stop()}},a,this)})}}function i(a){var b=a.next();while(!b.done)b=a.next(b.value);return b.value}function a(a,b){b===void 0&&(b=16);var d=c("BPlusTreeBase")(a,b,h()),e;return e={clear:function(){return i(d.clear())},"delete":function(a){return i(d["delete"](a))},entries:function(a){function b(){var c,e=d.entries(a);return c={next:function(a){return i(e.next(a))}},c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=b,c}return b()},get:function(a){return i(d.get(a))},getWithDefault:function(a,b){return i(d.getWithDefault(a,b))},has:function(a){return i(d.has(a))},set:function(a,b){i(d.set(a,b));return e}}}g["default"]=a}),98);
__d("LSDbKeyComparer",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=[[]];function i(a,b){var d=a===h,e=b===h;if(d&&e)return 0;if(d)return 1;if(e)return-1;if(a===void 0)return b===void 0?0:-1;else if(b===void 0)return 1;else if(Array.isArray(a)){if(!Array.isArray(b))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");d=a[0];e=b[0];if(d<e)return-1;if(d>e)return 1;d=a[1];e=b[1];if(d<e)return-1;if(d>e)return 1}else if(typeof a==="string"){if(typeof b!=="string")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="number"){if(typeof b!=="number")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(a instanceof Date){if(!(b instanceof Date))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="boolean"){if(typeof b!=="boolean")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(!a&&b)return-1;if(a&&!b)return 1}else throw c("unrecoverableViolation")("Unexpected type","messenger_comet");return 0}function a(a,b){for(a=a,b=b;;a=a.tl,b=b.tl){if(a===0&&b===0)return 0;if(a===0)return-1;if(b===0)return 1;var c=i(a.hd,b.hd);if(c!==0)return c}return 0}g.MAX_KEY=h;g.compareValue=i;g.compareKey=a}),98);
__d("PromiseOrValue",["isPromise","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(c("isPromise")(a)&&c("isPromise")(b))return a.then(function(a){return b.then(function(b){return[a,b]})});if(c("isPromise")(a))return a.then(function(a){return[a,b]});return c("isPromise")(b)?b.then(function(b){return[a,b]}):[a,b]}function b(a,b){return c("isPromise")(a)?a.then(b):b(a)}function h(a,b){b=b;while(!0){var d=a(b);if(c("isPromise")(d))return d.then(function(b){return b.action==="break"?b.value:h(a,b.value)});if(d.action==="break")return d.value;b=d.value}throw c("unrecoverableViolation")("just for flow","messenger_web_product")}g.all2=a;g.map=b;g.loop=h}),98);
__d("ReQLBounds",["LSDbKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return a?{hd:a.hd,tl:h(a.tl,b)}:b}function i(a){return h(a,{hd:d("LSDbKeyComparer").MAX_KEY,tl:0})}function j(a,b,c){if(a!=null&&b!=null)return d("LSDbKeyComparer").compareKey(a[1],b[1])*c>0?a[0]:b[0];if(a!=null)return a[0];if(b!=null)return b[0]}function a(a,b){return j((a==null?void 0:a.gt)!=null?[{gt:a.gt},i(a.gt)]:(a==null?void 0:a.gte)!=null?[{gte:a.gte},a.gte]:void 0,(b==null?void 0:b.gt)!=null?[{gt:b.gt},i(b.gt)]:(b==null?void 0:b.gte)!=null?[{gte:b.gte},b.gte]:void 0,1)}function b(a,b){return j((a==null?void 0:a.lt)!=null?[{lt:a.lt},a.lt]:(a==null?void 0:a.lte)!=null?[{lte:a.lte},i(a.lte)]:void 0,(b==null?void 0:b.lt)!=null?[{lt:b.lt},b.lt]:(b==null?void 0:b.lte)!=null?[{lte:b.lte},i(b.lte)]:void 0,-1)}function c(a,b,c){a.forEach(function(a){var e=a[0];a=a[1];var f=(e==null?void 0:e.gt)!=null?d("LSDbKeyComparer").compareKey(b,i(e.gt))>=0:(e==null?void 0:e.gte)!=null?d("LSDbKeyComparer").compareKey(b,e.gte)>0:!0;e=(e==null?void 0:e.lt)!=null?d("LSDbKeyComparer").compareKey(b,e.lt)<0:(e==null?void 0:e.lte)!=null?d("LSDbKeyComparer").compareKey(b,i(e.lte))<=0:!0;if(f&&e)return c(a)})}g.getLowerLimit=a;g.getUpperLimit=b;g.forEachMatchingBounds=c}),98);
__d("ReQLGlobalQueryContext",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){a=a.get(g);return a==null?[]:a}function b(a,b){a.set(g,b)}c={contents:void 0};f.getDependencies=a;f.setDependencies=b;f.globalQueryContext=c}),66);
__d("ReQL",["BPlusTree","LSDbKeyComparer","PromiseOrValue","ReQLBounds","ReQLGlobalQueryContext","regeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={bounds:e,filter:m,getKeyRange:n,map:p,take:t};function i(a,b){return a?{hd:a.hd,tl:i(a.tl,b)}:b}function j(a,b){b=b;a=a;while(b){if(!a)throw c("unrecoverableViolation")("unexpected end of key","messenger_web_product");b=b.tl;a=a.tl}return a}function k(a,b){try{var c=d("ReQLGlobalQueryContext").globalQueryContext.contents,e=d("ReQLGlobalQueryContext").getDependencies(b);d("ReQLGlobalQueryContext").setDependencies(b,[]);d("ReQLGlobalQueryContext").globalQueryContext.contents=b;var f,g;try{f=a(),g=d("ReQLGlobalQueryContext").getDependencies(b)}finally{d("ReQLGlobalQueryContext").setDependencies(b,e),d("ReQLGlobalQueryContext").globalQueryContext.contents=c}return[f,g]}catch(c){if(c instanceof Promise)return c.then(function(){return k(a,b)});throw c}}function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduceRight(function(a,b){return{hd:b,tl:a}},0)}function e(a){var b=this;function c(a,b){if(b==null)return a;var c=d("ReQLBounds").getLowerLimit(b,a);b=d("ReQLBounds").getUpperLimit(b,a);if(c!=null&&b!=null)return babelHelpers["extends"]({},c,b);if(c!=null)return c;if(b!=null)return b}return Object.setPrototypeOf({direction:b.direction,iterator:function(d,e){return b.iterator(d,c(a,e))},keyLength:b.keyLength,subscribe:function(d,e){return b.subscribe(d,c(a,e))}},h)}var l=Object.setPrototypeOf({direction:"asc",iterator:function(){return{next:function(){return{done:!0}}}},keyLength:0,subscribe:function(){return function(){}}},h);function f(){return l}function m(a){var c=this,e=new Map();return Object.setPrototypeOf({direction:c.direction,iterator:function(b,f){var g=c.iterator(b,f);return{next:function(b){return d("PromiseOrValue").loop(function(b){return d("PromiseOrValue").map(g.next(b),function(b){if(b.done)return{action:"break",value:b};var c=b.value,f=c[0];c=c[1];if(a(c)){d("ReQLBounds").forEachMatchingBounds(e,f,function(a){a.add(JSON.stringify(f))});return{action:"break",value:b}}d("ReQLBounds").forEachMatchingBounds(e,f,function(a){a["delete"](JSON.stringify(f))});return{action:"continue",value:void 0}})},b)}}},keyLength:c.keyLength,subscribe:function(d,f){var g={},h=new Set();e.set(g,[f,h]);var i=c.subscribe(function(c,e,f){var g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:g=JSON.stringify(c);if(!(e.operation==="add"&&a(e.value))){i.next=7;break}h.add(g);i.next=5;return b("regeneratorRuntime").awrap(d(c,e,f));case 5:i.next=28;break;case 7:if(!(e.operation==="put"&&a(e.value))){i.next=18;break}if(!h.has(g)){i.next=13;break}i.next=11;return b("regeneratorRuntime").awrap(d(c,e,f));case 11:i.next=16;break;case 13:h.add(g);i.next=16;return b("regeneratorRuntime").awrap(d(c,{operation:"add",value:e.value},f));case 16:i.next=28;break;case 18:if(!(e.operation==="put"&&h.has(g))){i.next=24;break}h["delete"](g);i.next=22;return b("regeneratorRuntime").awrap(d(c,{operation:"delete"},f));case 22:i.next=28;break;case 24:if(!(e.operation==="delete"&&h.has(g))){i.next=28;break}h["delete"](g);i.next=28;return b("regeneratorRuntime").awrap(d(c,e,f));case 28:case"end":return i.stop()}},null,this)},f);return function(){e["delete"](g);return i()}}},h)}function n(){var a=this;for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];var f=c.reduceRight(function(a,b){return{hd:b,tl:a}},0);function g(a){return a.gt!=null?{gt:i(f,a.gt)}:{gte:i(f,a.gte)}}function k(a){return a.lt!=null?{lt:i(f,a.lt)}:{lte:i(f,a.lte)}}function l(a){return a==null?{gte:f,lte:f}:babelHelpers["extends"]({},a.gte!=null||a.gt!=null?g(a):{gte:f},a.lte!=null||a.lt!=null?k(a):{lte:f})}return Object.setPrototypeOf({direction:a.direction,iterator:function(b,c){var e=a.iterator(b,l(c));return{next:function(a){return d("PromiseOrValue").map(e.next(a==null?a:i(f,a)),function(a){return a.done?{done:!0}:{done:!1,value:[j(a.value[0],f),a.value[1]]}})}}},keyLength:a.keyLength-c.length,subscribe:function(b,c){return a.subscribe(function(a,c,d){return b(j(a,f),c,d)},l(c))}},h)}function o(a,e){if(a.direction!==e.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:a.direction,iterator:function(b,f){var g=a.iterator(b,f),h=e.iterator(b,f),i=h.next();function j(a){return d("PromiseOrValue").map(i,function(b){var c=b.done?!0:d("LSDbKeyComparer").compareKey(a,b.value[0])<=0;c=c?b:h.next(a);i=c;return c})}return{next:function(a){return d("PromiseOrValue").map(g.next(a),function(a){if(a.done)return{done:!0,value:void 0};var b=a.value;b=b[0];return d("PromiseOrValue").map(j(b),function(b){var e=a.value,f=e[0];e=e[1];if(b.done)return{done:!1,value:[f,[e,void 0]]};b=b.value;var g=b[0];b=b[1];g=d("LSDbKeyComparer").compareKey(f,g);if(g>0)throw c("unrecoverableViolation")("Right iterable should always be equal to or ahead","messenger_web_product");else if(g<0)return{done:!1,value:[f,[e,void 0]]};else return{done:!1,value:[f,[e,b]]}})})}}},keyLength:Math.max(a.keyLength,e.keyLength),subscribe:function(c,d){var f=!0,g=a.subscribe(function(a,d,g){var h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(e.iterator(g,{gte:a,lte:a}).next());case 2:j=k.sent;if(f){k.next=5;break}return k.abrupt("return");case 5:k.next=7;return b("regeneratorRuntime").awrap(c(a,d.operation==="add"?{operation:"add",value:[d.value,(h=j.value)==null?void 0:h[1]]}:d.operation==="put"?{operation:"put",value:[d.value,(i=j.value)==null?void 0:i[1]]}:{operation:"delete"},g));case 7:case"end":return k.stop()}},null,this)},d),h=e.subscribe(function(d,e,g){var h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b("regeneratorRuntime").awrap(a.iterator(g,{gte:d,lte:d}).next());case 2:h=i.sent;if(!(!f||h.done)){i.next=5;break}return i.abrupt("return");case 5:i.next=7;return b("regeneratorRuntime").awrap(c(d,e.operation==="add"?{operation:"add",value:[h.value[1],e.value]}:e.operation==="put"?{operation:"put",value:[h.value[1],e.value]}:{operation:"delete"},g));case 7:case"end":return i.stop()}},null,this)},d);return function(){f=!1,g(),h()}}},h)}function p(a){var c=this,e=new Map();function f(c,d,e,f,h){var i=JSON.stringify(e),j=c.get(i);j==null&&(j=[],c.set(i,j));j.forEach(function(a){return a()});j.length=0;var k=j;h.forEach(function(h){k.push(h.subscribe(function(h,i,j){return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(g(c,d,e,f,j));case 2:h.next=4;return b("regeneratorRuntime").awrap(d(e,{operation:"put",value:a(f)},j));case 4:case"end":return h.stop()}},null,this)}))})}function g(b,c,e,g,h){return d("PromiseOrValue").map(k(function(){return a(g)},h),function(a){var d=a[0];a=a[1];f(b,c,e,g,a);return d})}function i(a,b){var c=JSON.stringify(b);if(!a.has(c))return;b=(b=a.get(JSON.stringify(b)))!=null?b:[];b.forEach(function(a){return a()});b.length=0;a["delete"](c)}return Object.setPrototypeOf({direction:c.direction,iterator:function(b,g){var h=c.iterator(b,g);return{next:function(c){return d("PromiseOrValue").map(h.next(c),function(g){if(g.done)return g;g=g.value;var c=g[0],h=g[1];return d("PromiseOrValue").map(d("PromiseOrValue").map(k(function(){return a(h)},b),function(a){var b=a[0],g=a[1];d("ReQLBounds").forEachMatchingBounds(e,c,function(a){var b=a[0];a=a[1];return f(b,a,c,h,g)});return b}),function(a){return{done:!1,value:[c,a]}})})}}},keyLength:c.keyLength,subscribe:function(d,f){var h={},j=new Map();e.set(h,[f,[j,d]]);var k=c.subscribe(function(c,e,f){var h,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:if(!(e.operation==="delete")){n.next=6;break}i(j,c);n.next=4;return b("regeneratorRuntime").awrap(d(c,e,f));case 4:n.next=24;break;case 6:if(!(e.operation==="add")){n.next=16;break}h=e.value;n.next=10;return b("regeneratorRuntime").awrap(g(j,d,c,h,f));case 10:k=n.sent;a(h);n.next=14;return b("regeneratorRuntime").awrap(d(c,{operation:"add",value:k},f));case 14:n.next=24;break;case 16:if(!(e.operation==="put")){n.next=24;break}l=e.value;n.next=20;return b("regeneratorRuntime").awrap(g(j,d,c,l,f));case 20:m=n.sent;a(l);n.next=24;return b("regeneratorRuntime").awrap(d(c,{operation:"put",value:m},f));case 24:case"end":return n.stop()}},null,this)},f);return function(){j.forEach(function(a){a.forEach(function(a){return a()})}),e["delete"](h),k()}}},h)}function q(a,b){var c=r(a,b);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return e.reduce(function(a,b){return r(a,b)},c)}function r(a,b){if(a.direction!==b.direction)throw c("unrecoverableViolation")("union requires iterables to be sorted in the same direction","messenger_web_product");var e=Math.max(a.keyLength,b.keyLength);function f(a,b){return b===0||a===0?0:{hd:a.hd,tl:f(a.tl,b-1)}}function g(a){return a.gt!=null?{gt:f(a.gt,e)}:{gte:f(a.gte,e)}}function j(a){return a.lt!=null?{lt:f(a.lt,e)}:{lte:f(a.lte,e)}}function k(a){return a==null?void 0:babelHelpers["extends"]({},a.gte!=null||a.gt!=null?g(a):{},a.lte!=null||a.lt!=null?j(a):{})}return Object.setPrototypeOf({direction:a.direction,iterator:function(c,g){var h=a.iterator(c,k(g)),j=b.iterator(c,k(g)),l=h.next(),m=j.next();return{next:function(b){b!==void 0&&(l=h.next(f(b,e)),m=j.next(f(b,e)));return d("PromiseOrValue").map(d("PromiseOrValue").all2(l,m),function(b){var c=b[0];b=b[1];function e(a,b){if(a.done)return{done:!0};a={done:!1,value:[i(a.value[0],{hd:b,tl:0}),a.value[1]]};b?l=h.next():m=j.next();return a}if(c.done)return e(b,!1);if(b.done)return e(c,!0);var f=a.direction==="asc"?[c,b]:[b,c],g=f[0];f=f[1];f=d("LSDbKeyComparer").compareKey((g=g.value)==null?void 0:g[0],(g=f.value)==null?void 0:g[0]);if(f<0)return e(c,!0);else return e(b,!1)})}}},keyLength:e+1,subscribe:function(c,d){var e=a.subscribe(function(a,b,d){return c(i(a,{hd:!0,tl:0}),b,d)},d),f=b.subscribe(function(a,b,d){return c(i(a,{hd:!1,tl:0}),b,d)},d);return function(){e(),f()}}},h)}function s(a,e){if(a.direction!==e.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:a.direction,iterator:function(b,c){var f=a.iterator(b,c),g=e.iterator(b,c);function h(a){return d("PromiseOrValue").loop(function(a){var b=a[0];a=a[1];if(b.done||a.done)return{action:"break",value:{done:!0}};var c=b.value,e=c[0];c=c[1];var h=a.value,i=h[0];h=h[1];var j=d("LSDbKeyComparer").compareKey(e,i);if(j>0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(b,g.next(e)),function(a){return{action:"continue",value:a}});else if(j<0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(f.next(i),a),function(a){return{action:"continue",value:a}});return{action:"break",value:{done:!1,value:[e,[c,h]]}}},a)}return{next:function(a){return d("PromiseOrValue").map(d("PromiseOrValue").all2(f.next(a),g.next(a)),h)}}},keyLength:Math.max(a.keyLength,e.keyLength),subscribe:function(c,d){var f=!0;function g(a,d,e,g,h){var i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b("regeneratorRuntime").awrap(a.iterator(h,{gte:e,lte:e}).next());case 2:i=l.sent;if(!(i.done||!f)){l.next=5;break}return l.abrupt("return");case 5:j=i.value[1];k=g.operation==="add"?{operation:"add",value:d(g.value,j)}:g.operation==="put"?{operation:"put",value:d(g.value,j)}:g;l.next=9;return b("regeneratorRuntime").awrap(c(e,k,h));case 9:case"end":return l.stop()}},null,this)}var h=a.subscribe(function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.apply(void 0,[e,function(a,b){return[a,b]}].concat(b))},d),i=e.subscribe(function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return g.apply(void 0,[a,function(a,b){return[b,a]}].concat(c))},d);return function(){f=!1,h(),i()}}},h)}function t(a){var e=this,f=new Map();return Object.setPrototypeOf({direction:e.direction,iterator:function(b,c){var g=e.iterator(b,c),h=0;return{next:function(b){if(h>=a)return{done:!0};else return d("PromiseOrValue").map(g.next(b),function(b){b.done||d("ReQLBounds").forEachMatchingBounds(f,b.value[0],function(c){var d=c[0];c=c[1];c.contents<=a&&(d.has(b.value[0])||(c.contents+=1,d.set(b.value[0],void 0)))});h+=1;return b})}}},keyLength:e.keyLength,subscribe:function(g,h){var i={},j=e.direction==="asc"?1:-1,k=c("BPlusTree")(function(a,b){return d("LSDbKeyComparer").compareKey(a,b)*-j}),l={contents:0};f.set(i,[h,[k,l]]);var m=e.subscribe(function(c,h,m){var n,o,p,q;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:o=(n=k.entries().next().value)==null?void 0:n[0];p=o==null?!0:d("LSDbKeyComparer").compareKey(c,o)*j<=0;if(!(h.operation==="delete"&&p)){r.next=19;break}if(!(l.contents>0)){r.next=7;break}k["delete"](c);r.next=7;return b("regeneratorRuntime").awrap(g(c,h,m));case 7:r.next=9;return b("regeneratorRuntime").awrap(e.iterator(m,o==null?void 0:j===1?{gt:o}:{lt:o}).next());case 9:q=r.sent;if(!(!q.done&&f.has(i))){r.next=16;break}k.set(q.value[0],void 0);r.next=14;return b("regeneratorRuntime").awrap(g(q.value[0],{operation:"add",value:q.value[1]},m));case 14:r.next=17;break;case 16:l.contents>0&&(l.contents-=1);case 17:r.next=39;break;case 19:if(!(h.operation==="add"&&l.contents<a)){r.next=26;break}l.contents+=1;k.set(c,void 0);r.next=24;return b("regeneratorRuntime").awrap(g(c,h,m));case 24:r.next=39;break;case 26:if(!(h.operation==="add"&&p)){r.next=36;break}if(!(o!=null)){r.next=31;break}k["delete"](o);r.next=31;return b("regeneratorRuntime").awrap(g(o,{operation:"delete"},m));case 31:k.set(c,void 0);r.next=34;return b("regeneratorRuntime").awrap(g(c,h,m));case 34:r.next=39;break;case 36:if(!(h.operation==="put"&&p)){r.next=39;break}r.next=39;return b("regeneratorRuntime").awrap(g(c,h,m));case 39:case"end":return r.stop()}},null,this)},h);return function(){f["delete"](i);return m()}}},h)}function u(a){return Object.setPrototypeOf({direction:"asc",iterator:function(b,c){return a.entries(b,"asc",c)},keyLength:a.keyLength,subscribe:a.subscribe},h)}function v(a){return Object.setPrototypeOf({direction:"desc",iterator:function(b,c){return a.entries(b,"desc",c)},keyLength:a.keyLength,subscribe:a.subscribe},h)}function w(a){var c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=[];d=a.iterator(new WeakMap());f.next=4;return b("regeneratorRuntime").awrap(d.next());case 4:e=f.sent;case 5:if(e.done){f.next=12;break}c.push(e.value[1]);f.next=9;return b("regeneratorRuntime").awrap(d.next());case 9:e=f.sent;f.next=5;break;case 12:return f.abrupt("return",c);case 13:case"end":return f.stop()}},null,this)}function x(a){var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=a.iterator(new WeakMap());e.next=3;return b("regeneratorRuntime").awrap(c.next());case 3:d=e.sent;if(!d.done){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.abrupt("return",d.value[1]);case 7:case"end":return e.stop()}},null,this)}function y(a){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=a.iterator(new WeakMap());f.next=3;return b("regeneratorRuntime").awrap(d.next());case 3:e=f.sent;if(!e.done){f.next=6;break}throw c("unrecoverableViolation")("expected result","messenger_web_product");case 6:return f.abrupt("return",e.value[1]);case 7:case"end":return f.stop()}},null,this)}g.prototype=h;g.key=a;g.empty=f;g.leftJoin=o;g.union=q;g.mergeJoin=s;g.fromTableAscending=u;g.fromTableDescending=v;g.toArrayAsync=w;g.firstAsync=x;g.firstExnAsync=y}),98);
__d("LSStorage",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e){a=a.tableNames[b];b=a.indexes;a=a.primaryKeyIds;a=e==null?a:b[e];return a.reduceRight(function(a,b){if(d[b]!==void 0||e!=null)return{hd:d[b],tl:a};throw c("unrecoverableViolation")("primary key must be defined on object","messenger_web_product")},0)}function b(a,b){while(a!==0&&b!==0){if(a.hd!==b.hd&&!(Array.isArray(a.hd)&&Array.isArray(b.hd)&&a.hd.length===b.hd.length&&a.hd.every(function(a,c){return a===b.hd[c]})))return!1;a=a.tl;b=b.tl}return a===0&&b===0}g.searchKey=a;g.areKeysEqual=b}),98);
__d("TempLogForMessages",[],(function(a,b,c,d,e,f){"use strict";d=function(){function a(a){this.$1=0,this.$3=a,this.$2=new Array(a)}var b=a.prototype;b.push=function(a){this.$2[this.$1%this.$3]=a,this.$1+=1};b.toArray=function(){var a=[];for(var b=this.$1;b<this.$3+this.$1;b++){var c=this.$2[b%this.$3];c!=null&&a.push(c)}return a};return a}();var g=new d(1e3);function a(a,b){g.push(b+a.toString())}function b(){g.push("eot")}function c(){return JSON.stringify(g.toArray())}f.recordStorageIdSet=a;f.recordEndOfTxn=b;f.getInsertionLog=c}),66);
__d("ReStorePersistence",["FBLogger","PromiseOrValue","TempLogForMessages","gkx","isPromise","justknobx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h={SENTINEL_DELETED:1};function i(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function j(b){if(b==null)return b;var c=Object.getOwnPropertyNames(b),a={},d,e;for(d=0;d<c.length;d++)e=b[c[d]],a[c[d]]=Array.isArray(e)?[].concat(e):e;return a}function k(a,b){b===void 0&&(b=h);if(c("gkx")("6767")){if(a===b)return!0;return a!=null&&typeof a==="object"&&Object.prototype.hasOwnProperty.call(a,"SENTINEL_DELETED")?!0:!1}return a===b}function a(a){return{clearCache:a.clearCache,close:a.close,createTransaction:function(e,f){f===void 0&&(f=new Map());var g=!1;function l(){if(g)throw c("FBLogger")("messenger_web_product").mustfixThrow("Transaction has closed")}return{close:function(){g=!0},flush:function(){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(a.flush(f));case 2:g=!0;case 3:case"end":return c.stop()}},null,this)},table:function(g){function m(b,c){l();var d=o.get(c);if(k(d))return void 0;return d!==void 0?d:a.get(b,g,c,e)}function n(b,f){return d("PromiseOrValue").map(m(b,f),function(b){if(b===void 0){var h=o.get(f),i=a.types.indexOf("indexeddb")===-1?"false":"true";throw c("FBLogger")("messenger_web_product").addMetadata("LS_WEB","RAW_DATA",c("justknobx")._("86")?d("TempLogForMessages").getInsertionLog():"").mustfixThrow("Got unexpected undefined, pdb: "+i+", mode: "+e+", table: "+g+", id: "+(JSON.stringify(f)||"")+", deletedInThisTxn: "+(k(h)?"true":"false"))}return b})}var o=i(f,g,function(){return new Map()});function p(a,e){var f;return{read:(f=b("regeneratorRuntime")).mark(function d(e){var f;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:f=m(a,e);if(!c("isPromise")(f)){b.next=7;break}b.next=4;return f;case 4:b.t0=b.sent;b.next=8;break;case 7:b.t0=f;case 8:return b.abrupt("return",b.t0);case 9:case"end":return b.stop()}},d,this)}),readExn:f.mark(function d(e){var f;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:f=n(a,e);if(!c("isPromise")(f)){b.next=7;break}b.next=4;return f;case 4:b.t0=b.sent;b.next=8;break;case 7:b.t0=f;case 8:return b.abrupt("return",b.t0);case 9:case"end":return b.stop()}},d,this)}),readHeader:f.mark(function d(){var f;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:f=m(a,e);if(!c("isPromise")(f)){b.next=7;break}b.next=4;return f;case 4:b.t0=b.sent;b.next=8;break;case 7:b.t0=f;case 8:return b.abrupt("return",b.t0);case 9:case"end":return b.stop()}},d,this)}),remove:f.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:l(),o.set(c,h);case 2:case"end":return a.stop()}},a,this)}),removeHeader:f.mark(function a(){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:l(),o.set(e,h);case 2:case"end":return a.stop()}},a,this)}),write:f.mark(function a(c,d){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:l(),o.set(c,d);case 2:case"end":return a.stop()}},a,this)}),writeHeader:f.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:l(),o.set(e,c);case 2:case"end":return a.stop()}},a,this)}),writeNew:f.mark(function e(f){var g;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:g=d("PromiseOrValue").map(m(a,"nextId"),function(a){a===void 0&&(a=0);o.set("nextId",a+1);o.set(a,f);return a});if(!c("isPromise")(g)){b.next=7;break}b.next=4;return g;case 4:b.t0=b.sent;b.next=8;break;case 7:b.t0=g;case 8:return b.abrupt("return",b.t0);case 9:case"end":return b.stop()}},e,this)})}}return{getBPlusTreeStore:p,incrementSeed:function(a,b){return d("PromiseOrValue").map(m(a,"seed"),function(a){a===void 0&&(a=0);o.set("seed",Math.max(a,b||0)+1);return b===void 0?a:b})},readData:b("regeneratorRuntime").mark(function a(d,e){var f;return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:f=m(d,e);if(!c("isPromise")(f)){a.next=7;break}a.next=4;return f;case 4:a.t0=a.sent;a.next=8;break;case 7:a.t0=f;case 8:return a.abrupt("return",a.t0);case 9:case"end":return a.stop()}},a,this)}),readDataExn:b("regeneratorRuntime").mark(function a(d,e){var f;return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:f=n(d,e);if(!c("isPromise")(f)){a.next=7;break}a.next=4;return f;case 4:a.t0=a.sent;a.next=8;break;case 7:a.t0=f;case 8:return a.abrupt("return",a.t0);case 9:case"end":return a.stop()}},a,this)}),readSeed:function(a){return d("PromiseOrValue").map(m(a,"seed"),function(a){a===void 0&&(a=0);return a})},remove:function(a,b){l(),o.set(b,h)},writeData:function(a,b,c){l(),o.set(b,j(c))},writeNewData:function(a,b){return d("PromiseOrValue").map(m(a,"nextId"),function(a){a===void 0&&(a=0);o.set("nextId",a+1);o.set(a,j(b));return a})}}}}},runExclusively:a.runExclusively}}g.sentinelDeleted=h;g.isDeletedValue=k;g.createDbStore=a}),98);
__d("ReStoreTransactionLock",["isPromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.waitFor=null;a!=null&&(this.waitFor=a.then(function(a){return b.waitFor=null}))}var b=a.prototype;b.chainPromiseOrValue=function(a){if(this.waitFor!=null)return this.waitFor.then(function(){return a("\ud83d\udd12")});else return a("\ud83d\udd12")};return a}();b=function(){function a(){this.lock=null}var b=a.prototype;b.chainPromiseOrValue=function(a){var b=this,d=this.lock;if(d==null){var e=a("\ud83d\udd12");if(c("isPromise")(e))d=e;else return e}else d=d.then(function(){return a("\ud83d\udd12")});var f=d.then(function(a){b.lock===f&&(b.lock=null);return a})["finally"](function(a){b.lock===f&&(b.lock=null)});this.lock=f;return f};return a}();g.WaitForPromiseLock=a;g.ReStoreTransactionLock=b}),98);
__d("ReStoreUtils",["LSTableDefaults","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=[];e.next=3;return b("regeneratorRuntime").awrap(a.next());case 3:d=e.sent;case 4:if(d.done){e.next=11;break}c.push(d.value);e.next=8;return b("regeneratorRuntime").awrap(a.next());case 8:d=e.sent;e.next=4;break;case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}},null,this)}function d(a,b){var d=c("LSTableDefaults")[b];return!d?a:Object.keys(d).reduce(function(a,b){Object.prototype.hasOwnProperty.call(a,b)||(a[b]=d[b]);return a},babelHelpers["extends"]({},a))}g.collectIterator=a;g.appendDefaultValues=d}),98);
__d("ReStoreVaulting",["cr:2075","cr:2151","cr:2203"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("cr:2075")!=null?b("cr:2075").vault(a):a}function c(a){return b("cr:2075")!=null?b("cr:2075").unvault(a):a}function d(a,c){return b("cr:2151")!=null&&b("cr:2203")!=null?b("cr:2151").unvaultDbRow(a,c,b("cr:2203").PERSISTED_DB_VAULT_DEFINITIONS):a}function e(a,c){return b("cr:2151")!=null&&b("cr:2203")!=null?b("cr:2151").vaultDbRow(a,c,b("cr:2203").PERSISTED_DB_VAULT_DEFINITIONS):a}g.maybeVault=a;g.maybeUnvault=c;g.maybeUnvaultDbRow=d;g.maybeVaultDbRow=e}),98);
__d("UserTimingUtils",["performance"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof c("performance").mark==="function"&&typeof c("performance").clearMarks==="function"&&typeof c("performance").measure==="function"&&typeof c("performance").clearMeasures==="function",i=!1;if(h&&c("performance").mark!=null){var j="__v3",k={};Object.defineProperty(k,"startTime",{get:function(){i=!0}});try{c("performance").mark(j,k)}catch(a){}finally{c("performance").clearMarks(j)}}function a(a){h&&c("performance").mark(a)}function b(a,b,d){d===void 0&&(d=!0);if(h){try{c("performance").measure(a,b)}catch(a){}d&&c("performance").clearMarks(b);c("performance").clearMeasures(a)}}function d(a){if(h){try{a=c("performance").getEntriesByName(a,"mark");if(a!=null&&a.length>0)return!0}catch(a){}return!1}}function e(a){if(h)try{c("performance").clearMarks(a)}catch(a){}}function f(a,b){if(i)try{c("performance").measure(a,b),c("performance").clearMeasures(a)}catch(a){}}function l(a,b){i&&(c("performance").mark(a,b),c("performance").clearMarks(a))}g.measureStart=a;g.measureEnd=b;g.hasMark=d;g.clearMarks=e;g.measureModern=f;g.markModern=l}),98);
__d("ReStore",["BPlusTreeBase","ExecutionEnvironment","FBLogger","I64","LSDbKeyComparer","LSStorage","Promise","PromiseOrValue","ReStorePersistence","ReStoreTransactionLock","ReStoreUtils","ReStoreVaulting","UserTimingUtils","clearTimeout","cr:1265","cr:2917","cr:2921","cr:2922","emptyFunction","err","gkx","isPromise","performanceNow","regeneratorRuntime","setTimeout","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(["threads","messages","pending_tasks","network_requests"]);e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"Transaction has finished")||this}return b}(babelHelpers.wrapNativeSuper(Error));function i(a){a=d("I64").cast(a);if(a===void 0)throw c("unrecoverableViolation")("Expected int64","messenger_web_product");return d("I64").to_float(a)}function j(a,b){function d(b){if(b.done)return b.value;if(!c("isPromise")(b.value))throw c("unrecoverableViolation")("expected promise","messenger_web_product");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}function k(a,b){return{next:function(c){return b.chainPromiseOrValue(function(b){return a.next(b,c)})}}}function l(a,b,e){return c("BPlusTreeBase")(d("LSDbKeyComparer").compareKey,16,b.getBPlusTreeStore(a,e==null?"root":"index("+e+")"))}function m(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(a,e,f){var g=d("ReStorePersistence").createDbStore(a),o=f||(b("cr:2922")!=null?b("cr:2922")(e,a.shouldSync):null);o==null&&c("FBLogger")("messenger_web_product").warn("ReStore created without subscription manager");var p=b("LSStorage").searchKey.bind(null,e),q={background:{first:null,last:null},ui:{first:null,last:null}},r=new(d("ReStoreTransactionLock").WaitForPromiseLock)(g.runExclusively(function(){var a,c,f;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:a=new Map();c=g.createTransaction("readwrite");f=J(c,a);h.prev=3;if(!(b("cr:2917")!=null)){h.next=7;break}h.next=7;return b("regeneratorRuntime").awrap(b("cr:2917").runMigrationForTableDefaultValuesIfNeeded(f,e));case 7:if(!(b("cr:2921")!=null)){h.next=10;break}h.next=10;return b("regeneratorRuntime").awrap(b("cr:2921").runMigrationForIndicesIfNeeded(f,e,function(b,e){return new(d("ReStoreTransactionLock").ReStoreTransactionLock)().chainPromiseOrValue(function(d){return I(a,c,new WeakMap(),b,e,d)})}));case 10:h.next=12;return b("regeneratorRuntime").awrap(c.flush());case 12:h.next=18;break;case 14:h.prev=14;h.t0=h["catch"](3);c.close();throw h.t0;case 18:case"end":return h.stop()}},null,this,[[3,14]])})),s=new Map();function t(a,b,c){return!b||a<=0?c:{hd:b.hd,tl:a===1?0:t(a-1,b.tl,c)}}function u(a,b){if(a==null)return void 0;a=babelHelpers["extends"]({},a);a.gt!=null&&(a.gt=t(b,a.gt,{hd:d("LSDbKeyComparer").MAX_KEY,tl:0}));a.lte!=null&&(a.lte=t(b,a.lte,{hd:d("LSDbKeyComparer").MAX_KEY,tl:0}));return a}function v(a,b,c,d,e){b=JSON.stringify([b,c]);c=a.get(b);a.set(b,[c==null?d:c[0],e])}function w(a,c,e,f,g,h){var i,k,m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:i=a.table(e);h=l(c,i,f);o.next=4;return b("regeneratorRuntime").awrap(j(h.getWithDefault(g,void 0)));case 4:k=o.sent;if(!(k===void 0)){o.next=7;break}return o.abrupt("return",void 0);case 7:m=j(i.readDataExn(c,k));n=d("ReStoreVaulting").maybeVaultDbRow(m,e);return o.abrupt("return",n);case 10:case"end":return o.stop()}},null,this)}function x(a,c,d,e,f,g){var h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b("regeneratorRuntime").awrap(w(a,c,d,e,f,g));case 2:h=i.sent;if(!(h===void 0)){i.next=5;break}return i.abrupt("return",void 0);case 5:return i.abrupt("return",p(d,h));case 6:case"end":return i.stop()}},null,this)}function y(a,b,f,g,i,k){function m(){var o=0,p=a.table(f),q=l(b,p,g),n=q.entries(babelHelpers["extends"]({},u(k,(g===void 0?e.tableNames[f].primaryKeyIds:e.tableNames[f].indexes[g]).length),{dir:i}));return q={next:function(a,e){c("gkx")("3827")&&(o++,o===20&&!h.has(f)&&c("FBLogger")("messenger_web_product").catching(c("err")("ReStore overfetch")).warn('ReStore fetched 20 or more rows from "%s" table',f));return d("PromiseOrValue").map(j(n.next(e)),function(a){return a.done?{done:!0}:d("PromiseOrValue").map(j(p.readDataExn(b,a.value[1])),function(b){b=d("ReStoreVaulting").maybeVaultDbRow(b,f);return{done:!1,value:[a.value[0],b]}})})}},q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=m,q}return m()}function z(a,c,f,g,h,i,j){var k,l,m,n,o,q,r,s,t,u;return b("regeneratorRuntime").async(function(v){while(1)switch(v.prev=v.next){case 0:k=function(a,b){var c=[],e=a;while(e!==0)c.push(e.hd),e=e.tl;return c.length>=b?a:c.reduceRight(function(a,b){return{hd:b,tl:a}},{hd:d("LSDbKeyComparer").MAX_KEY,tl:0})};if(!(i!=null&&d("LSDbKeyComparer").compareKey(h,i)===0)){v.next=3;break}return v.abrupt("return");case 3:(l=e.tableNames[g],m=l.cascadeUpdates,n=l.primaryKeyIds),o=function(){var g,l,d,m,o,u,v,w,x,A,B,E,F,G,H,I;return b("regeneratorRuntime").async(function(J){while(1)switch(J.prev=J.next){case 0:if(!r){J.next=6;break}if(!(s>=q.length)){J.next=3;break}return J.abrupt("return","break");case 3:t=q[s++];J.next=10;break;case 6:s=q.next();if(!s.done){J.next=9;break}return J.abrupt("return","break");case 9:t=s.value;case 10:g=t;l=g.indexName;d=g.tableName;m=e.tableNames[d],o=m.indexes,u=m.primaryKeyIds;v=l==null?u:o[l];w={gte:h,lte:k(h,v.length)};x=y(c,f,d,l,"asc",w);A=[];J.next=20;return b("regeneratorRuntime").awrap(x.next(j));case 20:B=J.sent;case 21:if(B.done){J.next=28;break}A.push(B.value);J.next=25;return b("regeneratorRuntime").awrap(x.next(j));case 25:B=J.sent;J.next=21;break;case 28:E=0;case 29:if(!(E<A.length)){J.next=49;break}F=A[E];F[0];G=F[1];H=p(d,G);if(!(i===void 0)){J.next=41;break}J.next=37;return b("regeneratorRuntime").awrap(D(a,c,f,d,H,j));case 37:J.next=39;return b("regeneratorRuntime").awrap(z(a,c,f,d,H,void 0,j));case 39:J.next=46;break;case 41:I=n.reduce(function(a,b,c){b=a[0];a=a[1];if(!a)return[b,a];b[v[c]]=a.hd;return[b,a.tl]},[babelHelpers["extends"]({},G),i])[0];J.next=44;return b("regeneratorRuntime").awrap(C(a,c,f,d,H,I,j));case 44:J.next=46;return b("regeneratorRuntime").awrap(z(a,c,f,d,H,p(d,I),j));case 46:E++;J.next=29;break;case 49:case"end":return J.stop()}},null,this)},(q=m,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 6:v.next=8;return b("regeneratorRuntime").awrap(o());case 8:u=v.sent;if(!(u==="break")){v.next=11;break}return v.abrupt("break",13);case 11:v.next=6;break;case 13:case"end":return v.stop()}},null,this)}function A(a,f,g,h){var i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:h=e.tableNames[g].autoIncrement;if(h){j.next=3;break}throw c("unrecoverableViolation")("only supported for auto-incrementing tables","messenger_web_product");case 3:j.next=5;return b("regeneratorRuntime").awrap(a.table(g).readSeed(f));case 5:i=j.sent;if(!(i===void 0)){j.next=8;break}throw c("unrecoverableViolation")("unexpected undefined autoIncrementSeed","messenger_web_product");case 8:return j.abrupt("return",d("I64").of_float(i));case 9:case"end":return j.stop()}},null,this)}function B(a,f,g,h,i,k){var m,n,o,q,r,s,t,u,w,x,y,z,A,B,C,D,H,I;return b("regeneratorRuntime").async(function(J){while(1)switch(J.prev=J.next){case 0:m=f.table(h);n=l(g,m);o=e.tableNames[h];q=p(h,i);r={};J.next=7;return b("regeneratorRuntime").awrap(j(n.getWithDefault(q,void 0)));case 7:s=J.sent;u=i;if(!(s!==void 0)){J.next=18;break}J.next=12;return b("regeneratorRuntime").awrap(j(m.readDataExn(g,s)));case 12:t=J.sent;r=E(Object.keys(o.indexes),h,t);w=d("ReStoreVaulting").maybeUnvaultDbRow(i,h);m.writeData(g,s,w);J.next=27;break;case 18:if(!o.autoIncrement){J.next=20;break}throw c("unrecoverableViolation")("Id must not be specified for new record when table has an autoincrementing primary key","messenger_web_product");case 20:u=d("ReStoreUtils").appendDefaultValues(i,o.name);x=d("ReStoreVaulting").maybeUnvaultDbRow(u,h);J.next=24;return b("regeneratorRuntime").awrap(m.writeNewData(g,x));case 24:s=J.sent;J.next=27;return b("regeneratorRuntime").awrap(j(n.set(q,s)));case 27:y=E(Object.keys(o.indexes),h,u);z=Object.keys(y);for(A=0;A<z.length;A++)B=z[A],r[B]!==void 0&&d("LSDbKeyComparer").compareKey(r[B],y[B])===0&&(delete y[B],delete r[B]);J.next=32;return b("regeneratorRuntime").awrap(F(a,f,g,h,y,k));case 32:J.next=34;return b("regeneratorRuntime").awrap(G(f,g,h,s,y));case 34:C=Object.keys(r),D=0;case 36:if(!(D<C.length)){J.next=44;break}H=C[D];I=l(g,m,H);J.next=41;return b("regeneratorRuntime").awrap(j(I["delete"](r[H])));case 41:D++;J.next=36;break;case 44:v(a,h,q,t,u);case 45:case"end":return J.stop()}},null,this)}function C(a,c,e,f,g,h,i){var j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:j=p(f,h);if(d("LSStorage").areKeysEqual(g,j)){k.next=4;break}k.next=4;return b("regeneratorRuntime").awrap(D(a,c,e,f,g,i));case 4:k.next=6;return b("regeneratorRuntime").awrap(B(a,c,e,f,h,i));case 6:case"end":return k.stop()}},null,this)}function D(a,c,d,f,g,h){var i,k,m,n,o,q,r,s,t;return b("regeneratorRuntime").async(function(u){while(1)switch(u.prev=u.next){case 0:i=c.table(f);k=l(d,i);m=e.tableNames[f];u.next=5;return b("regeneratorRuntime").awrap(j(k.getWithDefault(g,void 0)));case 5:n=u.sent;if(!(n!==void 0)){u.next=27;break}u.next=9;return b("regeneratorRuntime").awrap(j(i.readDataExn(d,n)));case 9:o=u.sent;if(!Object.keys(m.indexes).length){u.next=23;break}q=Object.keys(m.indexes);r=0;case 13:if(!(r<q.length)){u.next=23;break}h=q[r];s=p(f,o,h);if(!(s!=null)){u.next=20;break}t=l(d,i,h);u.next=20;return b("regeneratorRuntime").awrap(j(t["delete"](s)));case 20:r++;u.next=13;break;case 23:u.next=25;return b("regeneratorRuntime").awrap(j(k["delete"](g)));case 25:i.remove(d,n),v(a,f,g,o,void 0);case 27:case"end":return u.stop()}},null,this)}function E(a,b,c){return a.reduce(function(a,d){var e=p(b,c,d);a[d]=e;return a},{})}function F(a,c,d,e,f,g){var h,i,k,m,n,o,q,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:h=c.table(e),i=new Set(),k=Object.keys(f),m=0;case 4:if(!(m<k.length)){t.next=26;break}n=k[m];o=l(d,h,n);q=f[n];t.next=10;return b("regeneratorRuntime").awrap(j(o.getWithDefault(q)));case 10:r=t.sent;if(!(r!=null&&!i.has(r))){t.next=23;break}t.t0=p;t.t1=e;t.next=16;return b("regeneratorRuntime").awrap(j(h.readDataExn(d,r)));case 16:t.t2=t.sent;s=t.t0(t.t1,t.t2);t.next=20;return b("regeneratorRuntime").awrap(D(a,c,d,e,s,g));case 20:t.next=22;return b("regeneratorRuntime").awrap(z(a,c,d,e,s,void 0,g));case 22:i.add(r);case 23:m++;t.next=4;break;case 26:case"end":return t.stop()}},null,this)}function G(a,c,d,e,f){var g,h,i,k,m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:g=a.table(d),h=Object.keys(f),i=0;case 3:if(!(i<h.length)){o.next=12;break}k=h[i];m=l(c,g,k);n=f[k];o.next=9;return b("regeneratorRuntime").awrap(j(m.set(n,e)));case 9:i++;o.next=3;break;case 12:case"end":return o.stop()}},null,this)}function H(a,c,f,g,h,k){var m,n,o,q,r,s,t,u,w,x;return b("regeneratorRuntime").async(function(y){while(1)switch(y.prev=y.next){case 0:m=c.table(g);n=l(f,m);o=e.tableNames[g];if(!o.autoIncrement){y.next=11;break}q=h[e.tableNames[g].primaryKeyIds[0]];y.t0=d("I64");y.next=8;return b("regeneratorRuntime").awrap(m.incrementSeed(f,q===void 0?q:i(q)));case 8:y.t1=y.sent,r=y.t0.of_float.call(y.t0,y.t1),h[e.tableNames[g].primaryKeyIds[0]]=r;case 11:s=d("ReStoreUtils").appendDefaultValues(h,o.name);t=p(g,s);if(!(t==null)){y.next=15;break}throw new Error("Evaluating the object store's key path did not yield a value");case 15:y.next=17;return b("regeneratorRuntime").awrap(j(n.has(t)));case 17:if(y.sent){y.next=30;break}u=E(Object.keys(o.indexes),g,s);y.next=21;return b("regeneratorRuntime").awrap(F(a,c,f,g,u,k));case 21:w=d("ReStoreVaulting").maybeUnvaultDbRow(s,g);y.next=24;return b("regeneratorRuntime").awrap(m.writeNewData(f,w));case 24:x=y.sent;y.next=27;return b("regeneratorRuntime").awrap(j(n.set(t,x)));case 27:y.next=29;return b("regeneratorRuntime").awrap(G(c,f,g,x,u));case 29:v(a,g,t,void 0,s);case 30:case"end":return y.stop()}},null,this)}function I(a,c,d,f,g,h){var i,k,m,n,o,p,q,r,s,t,u,v,w,x,z,A,B,C;return b("regeneratorRuntime").async(function(D){while(1)switch(D.prev=D.next){case 0:i=c.table(f),k=g.map(function(a){return l(d,i,a)}),(m=k,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 3:if(!n){D.next=9;break}if(!(o>=m.length)){D.next=6;break}return D.abrupt("break",18);case 6:p=m[o++];D.next=13;break;case 9:o=m.next();if(!o.done){D.next=12;break}return D.abrupt("break",18);case 12:p=o.value;case 13:q=p;D.next=16;return b("regeneratorRuntime").awrap(j(q.clear()));case 16:D.next=3;break;case 18:r=g.filter(function(a){var b;return((b=e.tableNames[f])==null?void 0:b.indexes[a])!=null});if(!(r.length===0)){D.next=21;break}return D.abrupt("return");case 21:s=l(d,i);t=y(c,d,f,void 0,"asc",void 0);u=[];D.next=26;return b("regeneratorRuntime").awrap(t.next(h));case 26:v=D.sent;case 27:if(v.done){D.next=34;break}u.push(v.value);D.next=31;return b("regeneratorRuntime").awrap(t.next(h));case 31:v=D.sent;D.next=27;break;case 34:w=0;case 35:if(!(w<u.length)){D.next=50;break}x=u[w];z=x[0];A=x[1];B=E(r,f,A);D.next=42;return b("regeneratorRuntime").awrap(F(a,c,d,f,B,h));case 42:D.next=44;return b("regeneratorRuntime").awrap(j(s.get(z)));case 44:C=D.sent;D.next=47;return b("regeneratorRuntime").awrap(G(c,d,f,C,B));case 47:w++;D.next=35;break;case 50:case"end":return D.stop()}},null,this)}function J(a,c){var f=new(d("ReStoreTransactionLock").ReStoreTransactionLock)(),g=new WeakMap();return{table:function(h){return{add:function(d){return f.chainPromiseOrValue(function(e){return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(H(c,a,g,h,d,e));case 2:case"end":return f.stop()}},null,this)})},"delete":function(d){return f.chainPromiseOrValue(function(e){return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(D(c,a,g,h,d,e));case 2:f.next=4;return b("regeneratorRuntime").awrap(z(c,a,g,h,d,void 0,e));case 4:case"end":return f.stop()}},null,this)})},deleteThenInsert:function(e){return f.chainPromiseOrValue(function(f){var i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:i=d("ReStoreUtils").appendDefaultValues(e,h);j.next=3;return b("regeneratorRuntime").awrap(B(c,a,g,h,i,f));case 3:j.next=5;return b("regeneratorRuntime").awrap(z(c,a,g,h,p(h,i),void 0,f));case 5:case"end":return j.stop()}},null,this)})},entries:function(b,c,d){c===void 0&&(c="asc");return k(y(a,g,h,void 0,c,d),f)},get:function(b){return f.chainPromiseOrValue(function(c){return w(a,g,h,void 0,b,c)})},index:function(b){return{entries:function(c,d,e){d===void 0&&(d="asc");return k(y(a,g,h,b,d,e),f)},get:function(c){return f.chainPromiseOrValue(function(d){return w(a,g,h,b,c,d)})},getKey:function(c){return f.chainPromiseOrValue(function(d){return x(a,g,h,b,c,d)})},keyLength:e.tableNames[h].indexes[b].length}},keyLength:e.tableNames[h].primaryKeyIds.length,peekNextAutoIncrementId:function(){return f.chainPromiseOrValue(function(b){return A(a,g,h,b)})},put:function(b){return f.chainPromiseOrValue(function(d){return B(c,a,g,h,b,d)})},upsert:function(d,e){return f.chainPromiseOrValue(function(f){return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b("regeneratorRuntime").awrap(C(c,a,g,h,d,e,f));case 2:i.next=4;return b("regeneratorRuntime").awrap(z(c,a,g,h,d,p(h,e),f));case 4:case"end":return i.stop()}},null,this)})}}}}}function K(a,d){return new(b("Promise"))(function(e,f){var g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:q[d].last==null?q[d].first=q[d].last={value:function(){return a().then(e,f)}}:q[d].last=q[d].last.next={value:function(){return a().then(e,f)}};i.prev=1;g=q.ui.first==null?q.background:q.ui;if(!(g.first==null)){i.next=6;break}c("FBLogger")("messenger_web_product").mustfix("Expected work is missing");return i.abrupt("return");case 6:h=g.first;g.first===g.last&&(g.last=null);g.first=g.first.next;i.next=11;return b("regeneratorRuntime").awrap(h.value());case 11:i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](1),f(i.t0);case 16:case"end":return i.stop()}},null,this,[[1,13]])})}function L(a,b){a.clear(),b.forEach(function(b,c){return a.set(c,b)})}function M(a,e,f){f===void 0&&(f="background");var h,i,j,k,l,m;(c("gkx")("3827")||c("gkx")("3648")||c("gkx")("3902")||b("cr:1265"))&&(h=c("err")("Transaction timeout"));b("cr:1265")&&(j=Date.now());return g.runExclusively(function(){return K(function(){var f,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;return b("regeneratorRuntime").async(function(K){while(1)switch(K.prev=K.next){case 0:b("cr:1265")&&(i=c("performanceNow")(),k=Date.now());f={ref:void 0};p=new Map();q=new Map();r=function(){return{changedKeys:p,changeSet:q}};s=function(a){L(p,a.changedKeys),L(q,a.changeSet)};t=g.createTransaction("readwrite",q);K.prev=7;v=J(t,p);K.next=11;return b("regeneratorRuntime").awrap(b("Promise").race([a(v,r,s),n(h,f)]));case 11:u=K.sent;f.ref!=null&&c("clearTimeout")(f.ref);b("cr:1265")&&(l=Date.now());K.next=16;return b("regeneratorRuntime").awrap(t.flush());case 16:K.next=23;break;case 18:K.prev=18;K.t0=K["catch"](7);f.ref!=null&&c("clearTimeout")(f.ref);t.close();throw K.t0;case 23:b("cr:1265")&&(d("UserTimingUtils").measureModern("Restore Transact",{end:c("performanceNow")(),start:i}),m=Date.now()),w=new WeakMap(),(x=p,y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 26:if(!y){K.next=32;break}if(!(z>=x.length)){K.next=29;break}return K.abrupt("break",46);case 29:A=x[z++];K.next=36;break;case 32:z=x.next();if(!z.done){K.next=35;break}return K.abrupt("break",46);case 35:A=z.value;case 36:B=A;C=B[0];D=B[1];E=D[0];F=D[1];G=JSON.parse(C),H=G[0],G[1];K.next=44;return b("regeneratorRuntime").awrap(o==null?void 0:o.notifyTableAndIndexSubscribers(H,E,F,w));case 44:K.next=26;break;case 46:o==null?void 0:o.notifyTableV2(!0,p);o==null?void 0:o.notifyCommit();b("cr:1265")&&(e=Date.now(),I={broadcast:e,complete:l,flush:m,queue:j,start:k},b("cr:1265").recordRestoreTransaction(h,I,{changedKeys:p,changeSet:q}));return K.abrupt("return",u);case 50:case"end":return K.stop()}},null,this,[[7,18]])},f)})}return{clearCacheIfSupported:function(){var a=g;a instanceof Object&&a.clearCache!==void 0&&a.clearCache instanceof Function&&a.clearCache()},closeDb:function(){var a=g;a instanceof Object&&a.close!==void 0&&a.close()},getTableData:function(){return e},runInTransaction:M,subscribeToCommit:function(a){return(o==null?void 0:o.subscribeToCommit(a))||c("emptyFunction")},subscriptionManager:o,table:function(a){return m(s,a,function(){var b=new Map();return{entries:function(b,c,d){c===void 0&&(c="asc");return k(y(g.createTransaction("readonly"),b,a,void 0,c,d),r)},get:function(b,c){c===void 0&&(c=new WeakMap());return r.chainPromiseOrValue(function(d){return w(g.createTransaction("readonly"),c,a,void 0,b,d)})},index:function(d){return m(b,d,function(){return{entries:function(b,c,e){c===void 0&&(c="asc");return k(y(g.createTransaction("readonly"),b,a,d,c,e),r)},get:function(b,c){c===void 0&&(c=new WeakMap());return r.chainPromiseOrValue(function(e){return w(g.createTransaction("readonly"),c,a,d,b,e)})},getKey:function(b){return r.chainPromiseOrValue(function(c){return x(g.createTransaction("readonly"),new WeakMap(),a,d,b,c)})},keyLength:e.tableNames[a].indexes[d].length,subscribe:function(b,f){return(o==null?void 0:o.subscribeIndex(a,d,b,u(f,e.tableNames[a].indexes[d])))||c("emptyFunction")}}})},keyLength:e.tableNames[a].primaryKeyIds.length,peekNextAutoIncrementId:function(){return r.chainPromiseOrValue(function(b){return A(g.createTransaction("readonly"),new WeakMap(),a,b)})},subscribe:function(b,d){return(o==null?void 0:o.subscribeTable(a,b,u(d,e.tableNames[a].primaryKeyIds.length)))||c("emptyFunction")}}})}}}function n(a,d){return c("ExecutionEnvironment").canUseDOM&&(c("gkx")("3648")||c("gkx")("3902"))?new(b("Promise"))(function(b,e){var f=c("gkx")("3902")?1e3:5e3;d.ref=c("setTimeout")(function(){c("FBLogger")("messenger_web_product").catching(a).blameToPreviousFrame().mustfix("ReStore transaction took longer than %s ms to execute",f.toString()),e(a)},f)}):new(b("Promise"))(function(){})}a.TransactionClosedError=e;g["default"]=a}),98);
__d("LSPlatformLsInitLog",["ExecutionEnvironment","QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(25305590,"1127"),i=!1,j=!1;function a(){i||(i=!0,j=!1,c("QPLUserFlow").start(h,{cancelOnUnload:!0,timeoutInMs:c("ExecutionEnvironment").canUseDOM?1e6:0}))}function k(a,b,d){i&&!j&&(c("QPLUserFlow").addPoint(a,b),d!=null&&c("QPLUserFlow").addAnnotations(a,d))}function b(a){c("QPLUserFlow").addAnnotations(h,a)}function d(a,b){k(h,a,b)}function e(){i&&!j&&(j=!0,c("QPLUserFlow").endSuccess(h))}function f(a){j=!0,l(h,a)}function l(a,b){c("QPLUserFlow").endFailure(a,b)}g.start=a;g.addPointForEvent=k;g.addAnnotations=b;g.addPoint=d;g.endSuccess=e;g.fail=f;g.failEvent=l}),98);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={c:"string",t:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed default values data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}if(typeof a.c!=="string"||typeof a.t!=="string")return null;e=[];f=a.t;try{e=JSON.parse(a.c);for(d=0;d<e.length;d++){b=e[d];if(typeof b!=="string")return null}}catch(a){return null}return{columns:e,tableName:f}}function b(a){return{c:JSON.stringify(a.columns),t:a.tableName}}d="_db_defaults_meta";g.tryParseDefaultValuesData=a;g.defaultValuesColumnToValue=b;g.defaultValuesTableName=d}),98);
__d("ReStoreDefaultValueMigration",["LSPlatformLsInitLog","LSTableDefaults","ReStoreDefaultValuesMetadata","ReStoreUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,c){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return b("regeneratorRuntime").async(function(w){while(1)switch(w.prev=w.next){case 0:e={};w.next=3;return b("regeneratorRuntime").awrap(d("ReStoreUtils").collectIterator(c.table(d("ReStoreDefaultValuesMetadata").defaultValuesTableName).entries(a)));case 3:f=w.sent,(g=f,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 5:if(!h){w.next=11;break}if(!(i>=g.length)){w.next=8;break}return w.abrupt("break",41);case 8:j=g[i++];w.next=15;break;case 11:i=g.next();if(!i.done){w.next=14;break}return w.abrupt("break",41);case 14:j=i.value;case 15:k=j;l=k[0];m=k[1];if(!(l!=null)){w.next=39;break}o=d("ReStoreDefaultValuesMetadata").tryParseDefaultValuesData(m);if(!(o==null)){w.next=22;break}return w.abrupt("continue",39);case 22:(p=o.columns,q=o.tableName),e[q]=(n=e[q])!=null?n:new Set(),(r=p,s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 25:if(!s){w.next=31;break}if(!(t>=r.length)){w.next=28;break}return w.abrupt("break",39);case 28:u=r[t++];w.next=35;break;case 31:t=r.next();if(!t.done){w.next=34;break}return w.abrupt("break",39);case 34:u=t.value;case 35:v=u,e[q].add(v);case 37:w.next=25;break;case 39:w.next=5;break;case 41:return w.abrupt("return",e);case 42:case"end":return w.stop()}},null,this)}function i(a,d,e){var f,g,i,j,k,l,m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return b("regeneratorRuntime").awrap(h(a,d));case 2:f=o.sent;g={};for(i in e.tableNames){j=c("LSTableDefaults")[i];if(j!=null)for(k in j)m=(l=f[i])==null?void 0:l.has(k),m||(g[i]=(n=g[i])!=null?n:{},g[i][k]=j[k])}return o.abrupt("return",g);case 6:case"end":return o.stop()}},null,this)}function j(a,e){var f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.t0=b("regeneratorRuntime").keys(e);case 1:if((i.t1=i.t0()).done){i.next=9;break}f=i.t1.value;g=Object.keys(c("LSTableDefaults")[f]||{});h={columns:g,tableName:f};i.next=7;return b("regeneratorRuntime").awrap(a.table(d("ReStoreDefaultValuesMetadata").defaultValuesTableName).put(d("ReStoreDefaultValuesMetadata").defaultValuesColumnToValue(h)));case 7:i.next=1;break;case 9:case"end":return i.stop()}},null,this)}function a(a,c){var e,f,g,h,k,l,m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:e=new WeakMap();f=function(a,b){d("LSPlatformLsInitLog").addPoint("default_values_update_end_failure",{string:{default_values_update_failure_point:b,default_values_update_failure_reason:String(a)}})};o.prev=2;o.next=5;return b("regeneratorRuntime").awrap(i(e,a,c));case 5:g=o.sent,o.prev=6,o.t0=b("regeneratorRuntime").keys(g);case 8:if((o.t1=o.t0()).done){o.next=26;break}h=o.t1.value;k=a.table(h).entries(e);o.next=13;return b("regeneratorRuntime").awrap(k.next());case 13:l=o.sent;case 14:if(l.done){o.next=24;break}m=babelHelpers["extends"]({},l.value[1]);n=d("ReStoreUtils").appendDefaultValues(m,h);o.next=19;return b("regeneratorRuntime").awrap(a.table(h).put(n));case 19:o.next=21;return b("regeneratorRuntime").awrap(k.next());case 21:l=o.sent;o.next=14;break;case 24:o.next=8;break;case 26:o.next=28;return b("regeneratorRuntime").awrap(j(a,g));case 28:d("LSPlatformLsInitLog").addPoint("default_values_update_end_success");o.next=34;break;case 31:o.prev=31,o.t2=o["catch"](6),f(o.t2,"setDefaultValues");case 34:o.next=39;break;case 36:o.prev=36,o.t3=o["catch"](2),f(o.t3,"findDefaultValuesToUpdate");case 39:case"end":return o.stop()}},null,this,[[2,36],[6,31]])}g.runMigrationForTableDefaultValuesIfNeeded=a}),98);
__d("ReStoreIndexMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=typeof a==="string"?a:null;if(a==null)return null;try{a=JSON.parse(a);for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(typeof e!=="string")return null}return a}catch(a){return null}}function a(a){var b={indexName:"string",keyIds:"string",tableName:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}e=h(a.keyIds);if(e==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, key IDs "%s" are invalid',typeof a.keyIds==="string"?a.keyIds:"<"+typeof a.keyIds+">");return null}return typeof a.indexName!=="string"||typeof a.tableName!=="string"?null:{data:e,indexName:a.indexName,tableName:a.tableName}}function b(a,b){if(a==null)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!0;return!1}function d(a){return{indexName:a.indexName,keyIds:JSON.stringify(a.data),tableName:a.tableName}}e="_db_indices_meta";g.tryParseIndexData=a;g.indicesDiffer=b;g.indexDataToValue=d;g.indicesTableName=e}),98);
__d("ReStoreIndicesMigration",["LSPlatformLsInitLog","ReStoreIndexMetadata","ReStoreUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,c){var e,f,g,h,i,j,k,l,m,n,o,p,q;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:e={};r.next=3;return b("regeneratorRuntime").awrap(d("ReStoreUtils").collectIterator(c.table(d("ReStoreIndexMetadata").indicesTableName).entries(a)));case 3:f=r.sent,(g=f,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 5:if(!h){r.next=11;break}if(!(i>=g.length)){r.next=8;break}return r.abrupt("break",27);case 8:j=g[i++];r.next=15;break;case 11:i=g.next();if(!i.done){r.next=14;break}return r.abrupt("break",27);case 14:j=i.value;case 15:k=j;l=k[0];m=k[1];if(!(l!=null)){r.next=25;break}o=d("ReStoreIndexMetadata").tryParseIndexData(m);if(!(o==null)){r.next=22;break}return r.abrupt("continue",25);case 22:(p=o.indexName,q=o.tableName),e[q]=(n=e[q])!=null?n:{},e[q][p]={index:o.data,key:l};case 25:r.next=5;break;case 27:return r.abrupt("return",e);case 28:case"end":return r.stop()}},null,this)}function i(a,c,e){var f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return b("regeneratorRuntime").async(function(y){while(1)switch(y.prev=y.next){case 0:y.next=2;return b("regeneratorRuntime").awrap(h(a,c));case 2:f=y.sent;g={};for(i in e.tableNames){j=e.tableNames[i];for(k in j.indexes)m=j.indexes[k],n=(l=f[i])==null?void 0:l[k],d("ReStoreIndexMetadata").indicesDiffer(n==null?void 0:n.index,m)&&(g[i]=(o=g[i])!=null?o:{},g[i][k]=m)}p={};for(q in f){r=f[q];for(s in r)v=r[s],w=(t=e.tableNames[q])==null?void 0:(u=t.indexes)==null?void 0:u[s],w==null&&(p[q]=(x=p[q])!=null?x:{},p[q][s]=v)}return y.abrupt("return",{toRemove:p,toUpdate:g});case 8:case"end":return y.stop()}},null,this)}function j(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.t0=b("regeneratorRuntime").keys(c);case 1:if((j.t1=j.t0()).done){j.next=15;break}e=j.t1.value;f=c[e];j.t2=b("regeneratorRuntime").keys(f);case 5:if((j.t3=j.t2()).done){j.next=13;break}g=j.t3.value;h=f[g];i={data:h,indexName:g,tableName:e};j.next=11;return b("regeneratorRuntime").awrap(a.table(d("ReStoreIndexMetadata").indicesTableName).put(d("ReStoreIndexMetadata").indexDataToValue(i)));case 11:j.next=5;break;case 13:j.next=1;break;case 15:case"end":return j.stop()}},null,this)}function k(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.t0=b("regeneratorRuntime").keys(c);case 1:if((i.t1=i.t0()).done){i.next=14;break}e=i.t1.value;f=c[e];i.t2=b("regeneratorRuntime").keys(f);case 5:if((i.t3=i.t2()).done){i.next=12;break}g=i.t3.value;h=f[g].key;i.next=10;return b("regeneratorRuntime").awrap(a.table(d("ReStoreIndexMetadata").indicesTableName)["delete"](h));case 10:i.next=5;break;case 12:i.next=1;break;case 14:case"end":return i.stop()}},null,this)}function a(a,c,e){var f=new WeakMap();d("LSPlatformLsInitLog").addPoint("index_migration_started");var g=function(a,b){d("LSPlatformLsInitLog").addPoint("index_migration_end_failure",{string:{index_migration_failure_point:b,index_migration_failure_reason:String(a)}})};return i(f,a,c).then(function(f){var g,h,i,l,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:(g=f.toRemove,h=f.toUpdate),i=Array.from(new Set([].concat(Object.keys(h),Object.keys(g)))),d("LSPlatformLsInitLog").addAnnotations({"int":{index_migration_rebuild_tables_count:i.length},string_array:{index_migration_rebuilt_tables:i}}),l=0;case 4:if(!(l<i.length)){q.next=13;break}m=i[l];if(!(c.tableNames[m]!=null)){q.next=10;break}p=Array.from(new Set([].concat(Object.keys((n=h[m])!=null?n:{}),Object.keys((o=g[m])!=null?o:{}))));q.next=10;return b("regeneratorRuntime").awrap(e(m,p));case 10:l++;q.next=4;break;case 13:q.next=15;return b("regeneratorRuntime").awrap(j(a,h));case 15:q.next=17;return b("regeneratorRuntime").awrap(k(a,g));case 17:d("LSPlatformLsInitLog").addPoint("index_migration_end_success");case 18:case"end":return q.stop()}},null,this)},function(a){return g(a,"findIndicesToUpdateOrRemove")})["catch"](function(a){return g(a,"rebuildIndices")})}g.runMigrationForIndicesIfNeeded=a}),98);
__d("createReStoreEphemeralPersistence",["Promise","ReStorePersistence","TempLogForMessages","justknobx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(a){var e=b("Promise").resolve(),f=new Map();function g(a){return h(f,a,function(){return new Map()})}return{flush:function(e){var f,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(a!=null)){i.next=5;break}f=a();i.next=4;return b("regeneratorRuntime").awrap(f(e));case 4:return i.abrupt("return");case 5:h=!1,e.forEach(function(a,b){var e=g(b);a.forEach(function(a,f){d("ReStorePersistence").isDeletedValue(a)?(c("justknobx")._("86")&&b==="messages"&&(h=!0,d("TempLogForMessages").recordStorageIdSet(f,"-")),e["delete"](f)):(c("justknobx")._("86")&&b==="messages"&&(h=!0,d("TempLogForMessages").recordStorageIdSet(f.toString()+(a.isLeaf?" ("+JSON.stringify(a.children)+")":""),"+")),e.set(f,a))})}),c("justknobx")._("86")&&h&&d("TempLogForMessages").recordEndOfTxn();case 8:case"end":return i.stop()}},null,this)},get:function(a,b,c){a=g(b);return a.get(c)},runExclusively:function(a){return new(b("Promise"))(function(c,d){e=e.then(function(){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0;e.t0=c;e.next=4;return b("regeneratorRuntime").awrap(a());case 4:e.t1=e.sent;e.t0(e.t1);e.next=11;break;case 8:e.prev=8,e.t2=e["catch"](0),d(e.t2);case 11:case"end":return e.stop()}},null,this,[[0,8]])})})},shouldSync:function(){return!1},types:["ephemeral"]}}g["default"]=a}),98);
__d("LSDbKeyComparer.bs",["LSDbKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";g.cmp=d("LSDbKeyComparer").compareKey,g.maxKey=d("LSDbKeyComparer").MAX_KEY}),98);
__d("bs_js_dict",["bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(c in a)return b("bs_caml_option").some(a[c])}var g=function(a,b){delete a[b]};function c(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function d(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e)d[e]=a[b[e]];return d}function e(a){var b={};a=a;while(!0){var c=a;if(!c)return b;var d=c.hd;b[d[0]]=d[1];a=c.tl;continue}}function h(a){var b={},c=a.length;for(var d=0;d<c;++d){var e=a[d];b[e[0]]=e[1]}return b}function i(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0;f<e;++f){var g=d[f];c[g]=a(b[g])}return c}f.get=a;f.unsafeDeleteKey=g;f.entries=c;f.values=d;f.fromList=e;f.fromArray=h;f.map=i}),null);
__d("ReQLBounds.bs",["LSDbKeyComparer.bs","bs_js_dict","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){if(!b)return c;if(a<=0)return c;var d=b.hd;if(a===1)return{hd:d,tl:0};else return{hd:d,tl:h(a-1|0,b.tl,c)}}function a(a,b){return h(a,b,{hd:d("LSDbKeyComparer.bs").maxKey,tl:0})}function b(a,b){a=function(a){var b=a.NAME;if(b==="lessThan")return["lt",a.VAL];else if(b==="greaterThan")return["gt",a.VAL];else if(b==="greaterThanOrEqual")return["gte",a.VAL];else return["lte",a.VAL]};var d=b.NAME;if(d!=="range")if(d==="greaterThanOrEqual"||d==="greaterThan")return c("bs_js_dict").fromArray([a(b)]);else return c("bs_js_dict").fromArray([a(b)]);d=b.VAL;return c("bs_js_dict").fromArray([a(d[0]),a(d[1])])}function e(a){var b=a.operation;switch(b){case"add":return{_0:a.value,TAG:0};case"delete":return{_0:void 0,TAG:2};case"put":return{_0:a.value,TAG:1};default:return c("unrecoverableViolation")("Unexpected operation","messenger_web_product")}}f=h;g.nextKey=a;g.mapBounds=b;g.mapEventToOperation=e;g.concat=f}),98);
__d("IntervalList",["FBLogger","LSDbKeyComparer","ReQLBounds.bs","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("must not be null");return a}function a(a,c){var e=b("regeneratorRuntime").mark(k),f=new Map(),g=new Map(),i=new Map();function j(b,c){return c==null?!0:(c.gt!==void 0?a(b,c.gt)>0:c.gte!==void 0?a(b,c.gte)>=0:!0)&&(c.lt!==void 0?a(b,c.lt)<0:c.lte!==void 0?a(b,c.lte)<=0:!0)}function k(a){var h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:h=a,i={hd:d("LSDbKeyComparer").MAX_KEY,tl:0},k=0;case 3:if(!(h!==0&&g.size)){b.next=33;break}k++;l=h;m=h.tl;h.tl=k<c?i:0;b.prev=8;n=g.get(JSON.stringify(a));if(!(n!=null)){b.next=27;break}o=n,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 12:if(!p){b.next=18;break}if(!(q>=o.length)){b.next=15;break}return b.abrupt("break",27);case 15:r=o[q++];b.next=22;break;case 18:q=o.next();if(!q.done){b.next=21;break}return b.abrupt("break",27);case 21:r=q.value;case 22:s=r;b.next=25;return s;case 25:b.next=12;break;case 27:b.prev=27;l.tl=m;return b.finish(27);case 30:h=l.tl;b.next=3;break;case 33:t=f.entries(),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 34:if(!u){b.next=40;break}if(!(v>=t.length)){b.next=37;break}return b.abrupt("break",52);case 37:w=t[v++];b.next=44;break;case 40:v=t.next();if(!v.done){b.next=43;break}return b.abrupt("break",52);case 43:w=v.value;case 44:x=w;y=x[0];z=x[1];if(!(f.has(y)&&j(a,z))){b.next=50;break}b.next=50;return y;case 50:b.next=34;break;case 52:case"end":return b.stop()}},e,this,[[8,,27,30]])}function l(a){var b=i.get(a);if(b!=null){i["delete"](a);var c=h(g.get(b));c["delete"](a);c.size===0&&g["delete"](b)}else f["delete"](a)}function m(a,b){var e;if(a&&a.gte!=null&&a.lte!=null&&(e=JSON.stringify(d("ReQLBounds.bs").nextKey(c,a.gte)))===JSON.stringify(a.lte)){var h=g.get(e);h==null&&(h=new Set(),g.set(e,h));h.add(b);i.set(b,e)}else f.set(b,a)}return{"delete":l,findIntersecting:k,set:m}}g["default"]=a}),98);
__d("createReStoreSubscriptionManager",["FBLogger","IntervalList","LSDbKeyComparer","LSStorage","Promise","cr:3107","killswitch","nullthrows","promiseDone","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){var f=new Map(),g=new Map();function h(a,c,d,e){return b("Promise").all(Array.from(a.findIntersecting(d)).map(function(a){return a(d,e,c)}))}function i(b){return c("nullthrows")((f.has(b)?f:f.set(b,[c("IntervalList")(d("LSDbKeyComparer").compareKey,a.tableNames[b].primaryKeyIds.length),new Map()])).get(b))}function j(b,e){var f=i(b);f[0];f=f[1];return c("nullthrows")((f.has(e)?f:f.set(e,c("IntervalList")(d("LSDbKeyComparer").compareKey,a.tableNames[b].indexes[e].length))).get(e))}function k(e,f,g,i,j,k){var l=function(a,b){return h(e,k,a,b)},m=g==null?void 0:d("LSStorage").searchKey(a,f,g,j),n=i==null?void 0:d("LSStorage").searchKey(a,f,i,j);if(n==null&&m!=null)return l(m,{operation:"delete",prevValue:g});if(m==null&&n!=null)return l(n,{operation:"add",value:c("nullthrows")(i)});return m!=null&&n!=null?d("LSDbKeyComparer").compareKey(m,n)===0?l(m,{operation:"put",prevValue:g,value:c("nullthrows")(i)}):l(m,{operation:"delete",prevValue:g}).then(function(){return l(n,{operation:"add",value:c("nullthrows")(i)})}):b("Promise").resolve()}function l(a,c,d,e){var f=i(a),g=f[0],h=f[1];return k(g,a,c,d,null,e).then(function(){return b("Promise").all(Array.from(h.entries()).map(function(b){var f=b[0];b=b[1];return k(b,a,c,d,f,e)}).filter(function(a){return a!=null}))})}function m(){g.forEach(function(a){return a()})}function n(a,d){a===void 0&&(a=!1);function f(){var a=new Map();try{for(var b=d,f=Array.isArray(b),g=0,b=f?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=b.length)break;h=b[g++]}else{g=b.next();if(g.done)break;h=g.value}h=h;var i=h[0];h=h[1];i=JSON.parse(i);var j=i[0];i[1];if(e(j)){i=a.get(j)||[];a.set(j,[].concat(i,[h]))}}}catch(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Couldnot format changes to broadcast")}return Array.from(a)}if(!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&a&&b("cr:3107")!=null){a=f();b("cr:3107").postMessage("notifyTableV2",a)}}!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&b("cr:3107")!=null&&b("cr:3107").onEventReceive("notifyTableV2",function(a){c("promiseDone")(function(){var c,d,e,f,g,h,i,j,k,n,o,p,q,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:c=new WeakMap(),(d=a,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 2:if(!e){t.next=8;break}if(!(f>=d.length)){t.next=5;break}return t.abrupt("break",35);case 5:g=d[f++];t.next=12;break;case 8:f=d.next();if(!f.done){t.next=11;break}return t.abrupt("break",35);case 11:g=f.value;case 12:h=g,i=h[0],j=h[1],(k=j,n=Array.isArray(k),o=0,k=n?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 16:if(!n){t.next=22;break}if(!(o>=k.length)){t.next=19;break}return t.abrupt("break",33);case 19:p=k[o++];t.next=26;break;case 22:o=k.next();if(!o.done){t.next=25;break}return t.abrupt("break",33);case 25:p=o.value;case 26:q=p;r=q[0];s=q[1];t.next=31;return b("regeneratorRuntime").awrap(l(i,r,s,c));case 31:t.next=16;break;case 33:t.next=2;break;case 35:m();case 36:case"end":return t.stop()}},null,this)}())});return{dispose:function(){f.clear(),g.clear()},notifyCommit:m,notifyTableAndIndexSubscribers:l,notifyTableV2:n,subscribeIndex:function(a,c,d,e){var f=j(a,c),g=!1,h=function(a,c,e){return g?b("Promise").resolve():d(a,c,e)};f.set(e,h);return function(){g=!0,f["delete"](h)}},subscribeTable:function(a,c,d){a=i(a);var e=a[0],f=!1,g=function(a,d,e){return f?b("Promise").resolve():c(a,d,e)};e.set(d,g);return function(){f=!0,e["delete"](g)}},subscribeToCommit:function(a){g.set(a,a);return function(){g["delete"](a)}}}}g["default"]=a}),98);
__d("MAWCurrentUser",["CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";var h=Number(c("CurrentUser").getAppID());function a(){if(h===772021112871879||h===2220391788200892||h===256281040558)return c("CurrentUser").getID();else if(h===1217981644879628||h===936619743392459)return c("CurrentUser").getEIMU();else return c("CurrentUser").getID()}g.getID=a}),98);
__d("LSPersistedDbGating",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("gkx")("6543");b=c("gkx")("6543");d=b;g.anyTablesPersisted=a;g.allTablesPersisted=b;g.oneMqttConnectionAcrossTabs=d}),98);
__d("MWLSDatabaseNames",[],(function(a,b,c,d,e,f){"use strict";a="LightSpeed";b=a+"V3";f.name=a;f.lightspeedPrefix=b}),66);
__d("MWIndexedDBDelete",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MWLSDatabaseNames","ODS","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){try{if(a===1)return""+d("MWLSDatabaseNames").name+d("MAWCurrentUser").getID();else return d("MWLSDatabaseNames").name+"V"+a+d("MAWCurrentUser").getID()}catch(a){return null}}function a(a){var b;if(c("ExecutionEnvironment").canUseDOM&&((b=window)==null?void 0:b.indexedDB)!=null){var e=h(a);if(e!=null)if(typeof window.indexedDB.databases==="function"){b=window.indexedDB.databases();b.then(function(a){a.forEach(function(a){var b=a.name||"";if(b===e){a=window.indexedDB.deleteDatabase(b);a.onsuccess=function(){c("FBLogger")("messenger_web_product").info("MW PDB deletion success for "+b)};a.onblocked=function(){c("recoverableViolation")("[db clean up patch] Cannot delete db: blocked","messenger_web_product"),d("ODS").bumpEntityKey(3185,"mw_pdb_delete","blocked")};a.onerror=function(){d("ODS").bumpEntityKey(3185,"mw_pdb_delete","error"),c("recoverableViolation")("[pdb clean up patch] Cannot delete db","messenger_web_product")}}})})["catch"](function(a){c("recoverableViolation")("[pdb clean up patch] LS delete databases error","messenger_web_product",{error:a})})}else{a=window.indexedDB.deleteDatabase(e);a.onsuccess=function(){d("ODS").bumpEntityKey(3185,"mw_pdb_delete","success_v2")};a.onblocked=function(){c("recoverableViolation")("[db clean up patch v2] Cannot delete db: blocked","messenger_web_product"),d("ODS").bumpEntityKey(3185,"mw_pdb_delete","blocked_v2")};a.onerror=function(){d("ODS").bumpEntityKey(3185,"mw_pdb_delete","error_v2"),c("recoverableViolation")("[pdb clean up patch v2] Cannot delete db","messenger_web_product")}}}}g.getUserDbNameForVersion=h;g.deleteAllDBs=a}),98);
__d("LSDatabaseDeferred.bs",["CurrentUser","LSPersistedDbGating","LSPlatformLsInitLog","MWIndexedDBDelete","Promise","QPLUserFlow","bs_curry","cr:3566","justknobx","qpl","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";d("LSPlatformLsInitLog").start();a=c("bs_curry")._1(b("cr:3566").get).then(function(a){try{var e=c("justknobx")._("541"),f=!d("LSPersistedDbGating").anyTablesPersisted;f&&e>0&&d("MWIndexedDBDelete").deleteAllDBs(e)}catch(a){c("recoverableViolation")("[db clean up patch] Cant delete db","messenger_web_product")}try{d("LSPlatformLsInitLog").addPoint("db_created"),c("CurrentUser").isWorkUser()&&c("QPLUserFlow").addPoint(c("qpl")._(1036588047,"310"),"db_created")}catch(a){}return b("Promise").resolve(a)});e=a;g.$LSPersistedDatabaseProvider$OR$LSEphemeralDatabaseProvider$requireCondXplat=b("cr:3566");g.DatabaseProvider=b("cr:3566");g.db=e}),98);
__d("MWCMGetGroupId",["I64","LSDatabaseDeferred.bs","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(b("Promise"))(function(b,c){d("LSDatabaseDeferred.bs").db.then(function(e){e.runInTransaction(function(c){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.table("threads")).getKeyRange(d("I64").of_string(a))).then(function(a){if(a)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.table("community_folders")).getKeyRange(a.parentThreadKey)).then(function(a){a?b(d("I64").to_string(a.fbGroupId)):b()});else b()})},"readonly")["catch"](function(a){c(a)})})["catch"](function(a){c(a)})})}g["default"]=a}),98);
__d("MAWGating",["gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(c("gkx")("1224637")!==!0)if(c("qex")._("1506")===!0)return!0;else return c("qex")._("155")===!0;else return!1}function b(){return c("qex")._("272")===!0||c("qex")._("159")===!0}function d(){return c("qex")._("1364")===!0}function e(){if(c("qex")._("1513")===!0)return!0;else return c("qex")._("155")===!0}function f(){return c("gkx")("7045")}function h(){return c("gkx")("5514")}function i(){return c("qex")._("1313")===!0}function j(){return c("qex")._("648")===!0}function k(){return c("qex")._("763")===!0}function l(){return c("gkx")("690")}function m(){return c("gkx")("5611")}function n(){return c("gkx")("1262")}function o(){if(c("qex")._("1514")===!0)return!0;else return c("qex")._("155")===!0}function p(){return c("qex")._("354")}function q(){if(c("qex")._("1515")===!0)return!0;else return c("qex")._("408")===!0}function r(){return c("qex")._("1516")===!0}function s(){return c("gkx")("956")}function t(){return c("gkx")("6172")}function u(){return c("gkx")("6187")}function v(){if(c("gkx")("6172"))return c("qex")._("699")===!0;else return!1}function w(){if(c("gkx")("6172"))return c("gkx")("956");else return!1}function x(){if(c("gkx")("6187"))return c("qex")._("700")===!0;else return!1}function y(){if(c("gkx")("6187"))return c("gkx")("956");else return!1}function z(){if(c("qex")._("1520")===!0)return!0;else return c("qex")._("155")===!0}function A(){return c("qex")._("205")===!0}function B(){return c("gkx")("4470")}function C(){return c("qex")._("1523")===!0}function D(){return c("qex")._("751")===!0}function E(){return c("qex")._("899")===!0}function F(){return c("qex")._("588")===!0}function G(){return c("qex")._("1525")===!0}function H(){return c("qex")._("50")===!0}function I(){return c("gkx")("8220")}function J(){return c("qex")._("1672")===!0}function K(){return c("qex")._("1526")===!0}function L(){return c("qex")._("386")===!0}function M(){return c("qex")._("1527")===!0}var N=c("gkx")("4725");function O(){return c("qex")._("1528")===!0}function P(){return c("qex")._("1529")===!0}function Q(){if(c("gkx")("3890"))return!0;else return c("qex")._("923")===!0}function R(){return c("gkx")("6551")&&c("gkx")("4471")&&c("gkx")("4463")}function S(){if(c("qex")._("1530")===!0)return!0;else return c("qex")._("155")===!0}function T(){return c("qex")._("714")===!0}function U(){return c("qex")._("1532")===!0}function V(){return c("qex")._("1533")===!0}function W(){return c("qex")._("1534")===!0}function X(){if(c("qex")._("189")===!0)return!0;else return c("qex")._("155")===!0}function Y(){if(c("qex")._("2163")===!0)return!0;else return c("qex")._("198")===!0}function Z(){if(c("qex")._("13")===!0)return!0;else return c("qex")._("199")===!0}function $(){return c("qex")._("1536")===!0}function aa(){return c("qex")._("41")===!0}function ba(){if(c("qex")._("68")===!0)return!0;else return c("qex")._("310")===!0}function ca(){if(c("qex")._("77")===!0||c("qex")._("68")===!0)return!0;else return c("qex")._("1264")===!0}function da(){if(c("qex")._("112")===!0)return!0;else return c("qex")._("336")===!0}function ea(){if(c("qex")._("1238")===!0)return!0;else return c("qex")._("336")===!0}function fa(){if(c("qex")._("1746")===!0&&c("qex")._("160")===!0)return!0;else return c("qex")._("336")===!0}function ga(){if(c("qex")._("160")===!0)return!0;else return c("qex")._("336")===!0}function ha(){if(c("qex")._("308")===!0)return!0;else return c("qex")._("391")===!0}var ia=c("gkx")("5834");function ja(){return c("qex")._("351")===!0}function ka(){return c("qex")._("114")===!0}function la(){if(c("qex")._("158")===!0)return!0;else return c("qex")._("336")===!0}function ma(){return c("qex")._("323")===!0}function na(){return c("gkx")("6581")}function oa(){return c("gkx")("3106")}function pa(){return c("qex")._("542")===!0}function qa(){return c("qex")._("571")===!0}function ra(){return c("gkx")("346")}function sa(){return c("gkx")("3883")}function ta(){return c("gkx")("8355")}function ua(){return c("gkx")("433")}var va=c("gkx")("1115");function wa(){return c("gkx")("964")}function xa(){return c("gkx")("4169")}function ya(){return c("gkx")("4662")}function za(){return c("gkx")("7858")}function Aa(){return c("gkx")("2563")}function Ba(){return c("gkx")("6005")}function Ca(){if(c("qex")._("1239")===!0)return!0;else return c("qex")._("1677")===!0}function Da(){return c("qex")._("1000")===!0}function Ea(){return c("gkx")("6464")}function Fa(){return c("qex")._("133")===!0}function Ga(){return c("qex")._("1306")===!0}function Ha(){return c("qex")._("174")===!0}function Ia(){return c("qex")._("342")===!0}function Ja(){return c("gkx")("6940")}function Ka(){return c("qex")._("411")===!0}function La(){return c("qex")._("1232")===!0}function Ma(){return c("qex")._("598")===!0}function Na(){return c("gkx")("4483")}function Oa(){return c("gkx")("7252")}function Pa(){return c("qex")._("1268")===!0}function Qa(){return c("qex")._("155")===!0}function Ra(){return c("qex")._("1766")===!0}function Sa(){return c("qex")._("1766")===!0}function Ta(){return c("gkx")("3383")}function Ua(){if(c("qex")._("1233")===!0)return!0;else return c("qex")._("754")===!0}function Va(){if(c("qex")._("1222")===!0)return!0;else return c("qex")._("96")===!0}function Wa(){return c("qex")._("681")}function Xa(){return c("qex")._("1686")===!0}function Ya(){return c("gkx")("8239")}function Za(){return c("qex")._("1790")===!0}function $a(){return c("gkx")("8350")}function ab(){if(c("gkx")("5884"))return!0;else return c("qex")._("302")===!0}function bb(){return c("qex")._("1833")===!0}function cb(){return c("gkx")("4214")}function db(){return c("gkx")("8457")}function eb(){return c("qex")._("360")}function fb(){return c("gkx")("1573")}function gb(){return c("qex")._("328")===!0}function hb(){return c("gkx")("7649")}function ib(){return c("gkx")("7650")}function jb(){return c("gkx")("491")}function kb(){return c("gkx")("5911")}function lb(){return c("gkx")("7935")}function mb(){return c("gkx")("2061")}function nb(){return c("qex")._("319")===!0}function ob(){return c("gkx")("1901")}g.isArmadillo=a;g.isTlcSearchEnabled=b;g.isEyebrowTextEnabled=d;g.isGifEnabled=e;g.isGifSearchEnabled=f;g.isGroupSKDMEnabled=h;g.isMobileTLCOverride=i;g.isPinInputSoftBlockEnabled=j;g.isEducationalSoftBlockEnabled=k;g.isDebugUIEnabled=l;g.isDevDebugEnabled=m;g.enableRawStanzaQueueStore=n;g.isStickerEnabled=o;g.getArmadilloDbVersion=p;g.wellBeingFeaturesEnabled=q;g.isEphemeralMessagesEnabled=r;g.isDualSendWebOrCrossApp=s;g.oneToOneDualSendKillswitch=t;g.groupDualSendKillswitch=u;g.isOneToOneDualSendTextEnabled=v;g.isOneToOneDualSendMediaEnabled=w;g.isGroupDualSendTextEnabled=x;g.isGroupDualSendMediaEnabled=y;g.isForwardEnabled=z;g.isCrossForwardEnabled=A;g.isVaultingEnabled=B;g.isReportingEnabled=C;g.isPullModeEnabled=D;g.isBulkGroupEncEnabled=E;g.isFeatureLimitEnabled=F;g.isReactionsEnabled=G;g.isCustomReactionsEnabled=H;g.isDbCleanupEnabled=I;g.isICDCHTTPRegEnabled=J;g.isICDCEnabled=K;g.isICDCErrorEnabled=L;g.isClientTimeoutsEnabled=M;g.isOptedOutOfTimeouts=N;g.isUnsendGlobalEnabled=O;g.isUnsendLocallyEnabled=P;g.isOccamadillo=Q;g.isOccamadilloResumeSyncEnabled=R;g.isEncryptionAtRestEnabled=S;g.isDevserverDeviceEnabled=T;g.isBlockEnabled=U;g.isRestrictEnabled=V;g.isReactionsCleanerEnabled=W;g.isRepliesEnabled=X;g.isSearchEnabled=Y;g.isContentSearchEnabled=Z;g.isAppSyncDeleteThreadEnabled=$;g.isSecurityAlertEnabled=aa;g.isThreadLevelCutoverEnabled=ba;g.isXMAFeedPostShareEnabled=ca;g.isLabyrinthOnWebEnabled=da;g.isUploadFlowEnabled=ea;g.isXMABackupEnabled=fa;g.isAttachmentBackupEnabled=ga;g.isGroupInvitesEnabled=ha;g.isArmadilloMessageSortedOrderChanged=ia;g.isHotLikeEnabled=ja;g.isPushNotificationEnabled=ka;g.isPinCodeEnabled=la;g.isPinCodeAccessibleInputEnabled=ma;g.isGDriveIntegrationEnabled=na;g.isE2EEAttributionAndPresenceEnabled=oa;g.isMobileExternalIdFormatEnabled=pa;g.isAdminMsgOptEnabled=qa;g.isWebErrorStateM1Enabled=ra;g.isWebErrorStateM2Enabled=sa;g.isBulkifyHIMEnabled=ta;g.isWebLoadStateEnabled=ua;g.isInitSyncApiImprovementsEnabled=va;g.isSenderKeyPredistributionEnabled=wa;g.isPreEstablishSessionEnabled=xa;g.isSmartSenderKeyRotationEnabled=ya;g.isDeviceRegistrationDomainUniquenessEnabled=za;g.isMultiDomainReRegRecoveryEnabled=Aa;g.isReregistrationOnSessionChangeEnabled=Ba;g.isLegacyThreadUploadEnabled=Ca;g.isDyiEnabled=Da;g.isArmadilloTotalMessageCollectionEnabled=Ea;g.shouldDisplayWeakPinPromptForEBSetup=Fa;g.isVirtualDeviceRevocationFlowEnabled=Ga;g.isSortOrderPaginationEnabled=Ha;g.isDeviceAdminMessagesSnippetDisabled=Ia;g.isBulkContactUpdateEnabled=Ja;g.isQrCodeEnabled=Ka;g.isRetroactiveBackupsEnabled=La;g.isRetroactiveBackupsAttachmentsEnabled=Ma;g.isDetailedHandleIncomingMsgQPLEnabled=Na;g.isBatchLoadParticipantsEnabled=Oa;g.isFrankingEnabled=Pa;g.isEbEnabledOnIg=Qa;g.isCodeOnlyInitEnabled=Ra;g.isCodeOnlyWorkerEnabled=Sa;g.isSecurityToggleForDFEnabled=Ta;g.isOnboardingFlowEnabled=Ua;g.isRestoreFlowEnabled=Va;g.getOrchestratorVersion=Wa;g.isUserPartOfEncryptedBackupDebugging=Xa;g.isTlcPublicUser=Ya;g.shouldUseCoalescedSchemas=Za;g.isDownloadablePreviewsEnabled=$a;g.isVoiceClipEnabled=ab;g.shouldUseCondensedSchemas=bb;g.isJpegThumbnailOverChatdDisabled=cb;g.isForceNonPersistedJobsEnable=db;g.getExtraWebWorkerMemoryToConsume=eb;g.shouldPreloadSessions=fb;g.isLoggingDisabled=gb;g.shouldPurgeExcessiveBackupJobs=hb;g.shouldPurgeExcessiveRestoreJobs=ib;g.isBulkRetryReceiptProcessing=jb;g.isEphemeralSettingsInMemoryEnabled=kb;g.isChatWithYourselfEnabled=lb;g.isNewJobIDBEnabled=mb;g.shouldFlattenDbVersions=nb;g.isCMCDMessengerWebEnabled=ob}),98);
__d("LSJSInMemoryStorage.bs",["ReStore","createReStoreEphemeralPersistence"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("ReStore")(c("createReStoreEphemeralPersistence")(),a)}b=a;g.make=b}),98);
__d("LSMailboxInitialSyncCursor",["I64","LSPlatformMessengerSyncParams","LSPlatformWorkplaceSyncParams","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";a=c("gkx")("1224637")?c("LSPlatformWorkplaceSyncParams").mailbox:c("LSPlatformMessengerSyncParams").mailbox;b=d("I64").of_int32(c("qex")._("461")===!0?3:1);e=d("I64").of_int32(0);g.syncParams=a;g.syncChannel=b;g.lastSyncTimestampMs=e}),98);
__d("LSSyncGroupsUtils",["CurrentLocale","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";a={canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:d("LSIntEnum").ofNumber(0),initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:d("LSIntEnum").ofNumber(0),minTimeToSyncTimestampMs:d("LSIntEnum").ofNumber(-1),priority:d("LSIntEnum").ofNumber(0),regionHint:void 0,sendSyncParams:!0,syncChannel:d("LSIntEnum").ofNumber(1),syncParams:JSON.stringify({locale:c("CurrentLocale").get()}),syncStatus:d("LSIntEnum").ofNumber(0)};b={epochId:void 0,failureCount:d("LSIntEnum").ofNumber(0),lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:d("LSIntEnum").ofNumber(0),lastSyncRequestTimestampMs:d("LSIntEnum").ofNumber(0),networkTaskIdentifier:void 0,syncDatabaseId:d("LSIntEnum").ofNumber(0),taskQueueName:""};e=d("LSIntEnum").ofNumber(0);f=d("LSIntEnum").ofNumber(9999999999999);g.defaultSyncGroup=a;g.defaultNetworkRequest=b;g.initialEpochId=e;g.neverSyncTimestamp=f}),98);
__d("MNetRankType",[],(function(a,b,c,d,e,f){a=Object.freeze({INBOX_ACTIVE_NOW:0,MESSENGER_USER_SEARCH:1,MONTAGE_USER:2,BROADCAST_FLOW_TOP_CONTACTS:3,BROADCAST_FLOW_NEEDY_CONTACTS:4,MESSENGER_GROUP_SEARCH:5,RTC_TOP_CONTACTS:6,PSTN_TOP_CONTACTS:7,MESSENGER_NON_CONTACT_SEARCH:8,MESSENGER_SEARCH_BOOTSTRAP:9,ACTIVE_BEEPER:10,MONTAGE_AND_ACTIVE_NOW:11,MESSENGER_PAGE_SEARCH:12,MESSENGER_GAME_SEARCH:13,WWW_NULLSTATE:14,RTC_GROWTH:15,MESSENGER_OMNIPICKER_NULLSTATE:16,RTC_SEQUENTIAL_TOP_CONTACTS:17,MESSENGER_USER_SEARCH_NULLSTATE:18,MLITE_DIODE_PROMOTION:19,MESSENGER_PENDING_REQUEST:20,MESSENGER_CLOSE_CONNECTION:21,MESSENGER_MONTAGE_SEEN_SHEET:22,MESSENGER_OMNIPICKER_KEYPRESS:23,MESSENGER_NOTIF_QP_TARGETING_UPSELL_TYPE:24,CONTACT_TAB_ACTIVE_NOW:26,MESSENGER_UNIV_NULLSTATE_BLEND:27,MESSENGER_INBOX_THREADS:28,INBOX_ACTIVE_NOW_NO_BOOSTING:29,BROADCAST_FLOW_TOP_CONTACTS_FB_SHARE:30,BROADCAST_FLOW_TOP_CONTACTS_MESSENGER_SHARE:31,BROADCAST_FLOW_TOP_CONTACTS_EXTERNAL_SHARE:32,MESSENGER_TRENDING_STICKERS:33,MESSENGER_BROADCAST_FLOW_TOP_THREADS:34,MESSENGER_SENDS_28D:35,MESSENGER_ROOM_INVITE:36,MESSENGER_ROOM_INVITE_SEARCH:37,INBOX_ACTIVE_NOW_PREFETCH:38,MESSENGER_BLENDED_KEYPRESS:39,MESSENGER_BLENDED_NULLSTATE:40,MESSENGER_CARRIER_MESSAGING:41,MESSENGER_ROOM_INVITE_GROUP:42,MESSENGER_INBOX_BIRTHDAY_ITEM:43,INSTAGRAM_DIRECT_SEARCH_NULLSTATE:44,BROADCAST_FLOW_TOP_CONTACTS_AND_TOP_THREAD_FB_SHARE:45,BROADCAST_FLOW_TOP_THREADS_FB_SHARE:46,FB_H_SCROLL_RANKING:47,FB_MESSAGING_USER_SEARCH:48,FB_MESSAGING_USER_SEARCH_NULLSTATE:49,MESSENGER_ACTIVE_NOW_TRAY_ACTIVE_CC:50});f["default"]=a}),66);
__d("LSDefaultSyncGroups",["CurrentEnvironment","CurrentUser","I64","LSIntEnum","LSMailboxInitialSyncCursor","LSPlatformLsInitLog","LSSyncGroupsUtils","MAWGating","MNetRankType","Promise","ReQL","gkx","qex","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set();d("MAWGating").isArmadillo()&&d("MAWGating").isOccamadillo()&&!d("MAWGating").isOccamadilloResumeSyncEnabled()&&h.add(95);e=d("MAWGating").isArmadillo()&&d("MAWGating").isOccamadillo()?{groupId:95}:null;var i=[{groupId:1},{groupId:2},{groupId:6},{groupId:7,syncParams:JSON.stringify({mnet_rank_types:[c("MNetRankType").INSTAGRAM_DIRECT_SEARCH_NULLSTATE]})},{groupId:16},{groupId:28},c("qex")._("923")?{groupId:95}:null],j=[{groupId:1,lastSyncRequestTimestampMs:d("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,syncParams:d("LSMailboxInitialSyncCursor").syncParams},{groupId:2,lastSyncRequestTimestampMs:d("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel},{groupId:7,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncParams:JSON.stringify({mnet_rank_types:[c("MNetRankType").MESSENGER_USER_SEARCH,c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE,c("MNetRankType").INBOX_ACTIVE_NOW,c("MNetRankType").MESSENGER_OMNIPICKER_NULLSTATE]})},{groupId:15,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp},{groupId:12,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp},{groupId:16},{groupId:26},{groupId:5},{groupId:28},{groupId:118,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp},e,c("qex")._("274")||c("gkx")("6543")||c("gkx")("5849")?{groupId:6,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp}:null,c("gkx")("2250")?{groupId:108}:null];function k(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("network_requests")).getKeyRange("")));case 2:e=g.sent;f=e.map(function(a){a=a.syncDatabaseId;return d("LSIntEnum").toNumber(a)});return g.abrupt("return",b("Promise").all(c.map(function(c){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(c!=null&&(!f.includes(c.groupId)||h.has(c.groupId)))){e.next=3;break}e.next=3;return b("regeneratorRuntime").awrap(a.table("network_requests").put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultNetworkRequest,{syncDatabaseId:d("LSIntEnum").ofNumber(c.groupId)})));case 3:case"end":return e.stop()}},null,this)})));case 5:case"end":return g.stop()}},null,this)}function l(a,c){var e,f,g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:g=function(c){var e,g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=c.groupId,g=babelHelpers.objectWithoutPropertiesLoose(c,["groupId"]);if(!(!f.includes(e)||h.has(e))){i.next=4;break}i.next=4;return b("regeneratorRuntime").awrap(a.table("sync_groups").put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,g,{groupId:d("LSIntEnum").ofNumber(e)})));case 4:case"end":return i.stop()}},null,this)};i.next=3;return b("regeneratorRuntime").awrap(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("sync_groups"))));case 3:e=i.sent;f=e.map(function(a){a=a.groupId;return d("LSIntEnum").toNumber(a)});i.next=7;return b("regeneratorRuntime").awrap(b("Promise").all(c.map(function(a){return a&&g(a)})));case 7:case"end":return i.stop()}},null,this)}function m(a){var b=c("CurrentEnvironment").instagramdotcom?c("CurrentUser").getEIMU():c("CurrentUser").getID();return a.table("_user_info").put({facebookUserId:d("I64").of_string(b),id:d("LSIntEnum").ofNumber(1)})}function n(a){return a!=null?a:c("CurrentEnvironment").instagramdotcom?i:j}function a(a,c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:f=n(c);d("LSPlatformLsInitLog").addPoint(e?e+"_db_seed_starts":"db_seed_starts");g.next=4;return b("regeneratorRuntime").awrap(m(a));case 4:g.next=6;return b("regeneratorRuntime").awrap(k(a,f));case 6:g.next=8;return b("regeneratorRuntime").awrap(l(a,f));case 8:d("LSPlatformLsInitLog").addPoint(e?e+"_success_db_seed":"success_db_seed");case 9:case"end":return g.stop()}},null,this)}g.e2eeMetadataSyncGroup=e;g.igdSyncGroups=i;g.defaultSyncGroups=j;g.seedDb=a}),98);
__d("LSDbForeignKeys",[],(function(a,b,c,d,e,f){"use strict";a={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],community_chat_poll_options:[{tableName:"community_chat_poll_votes"}],community_chat_polls:[{tableName:"community_chat_poll_options"},{tableName:"community_chat_poll_votes"}],messages:[{indexName:"fk_messages",tableName:"attachments"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"attachments"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"}]};b=a;f["default"]=b}),66);
__d("LSMetadata",["LSDbForeignKeys","LSTableSchemas","ReStoreDefaultValuesMetadata","ReStoreIndexMetadata"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b={},e={},f=-1;for(var g=0;g<a.length;g++){var h=a[g];for(var h=h,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k={autoIncrement:(k=l.auto_increment)!=null?k:!1,cascadeUpdates:(k=c("LSDbForeignKeys")[l.name])!=null?k:[],id:parseInt(l.id,10),indexes:(k=l.indexes)!=null?k:{},name:l.name,primaryKeyIds:l.primary_key};b[k.id]=k;e[k.name]=k;k.id>f&&(f=k.id)}}l={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]};b[l.id]=l;e[l.name]=l;k={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]};b[k.id]=k;e[k.name]=k;return{tableIds:b,tableNames:e}}function a(a){a=h(a);var b=a.tableIds;a=a.tableNames;return{tableIds:b,tableNames:a}}b=a(c("LSTableSchemas"));g.buildTableData=h;g.buildMetadata=a;g.metadata=b}),98);
__d("LSTransaction.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return a.runInTransaction(b,function(){switch(c){case"readOnly":return"readonly";case"readWrite":return"readwrite"}}())}f.run=a}),null);
__d("MWLSSchemaEphemeral.bs",["LSDefaultSyncGroups","LSJSInMemoryStorage.bs","LSMetadata","LSPlatformLsInitLog","LSTransaction.bs","Promise"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("LSPlatformLsInitLog").addPoint("edb_init_starts");return b("Promise").resolve(d("LSJSInMemoryStorage.bs").make(d("LSMetadata").metadata)).then(function(a){return(d("LSPlatformLsInitLog").addPoint("success_edb_init"),d("LSTransaction.bs").run(a,function(a){return d("LSDefaultSyncGroups").seedDb(a,void 0,"ephemeral")},"readWrite")).then(function(b){return a})})}c=a;g.createDB=c}),98);
__d("GetLsDatabaseForComet.bs",["bs_curry","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";b=c("requireDeferred")("MWLSSchemaEphemeral.bs").__setRef("GetLsDatabaseForComet.bs");var h=b.load().then(function(a){return c("bs_curry")._1(a.createDB)});function a(a){return h}g.$MWLSSchemaEphemeral$Deferred=b;g.get=a}),98);
__d("LSEphemeralDatabaseProvider.bs",["bs_curry","cr:1942626"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("bs_curry")._1(b("cr:1942626").get)}g.$GetLsDatabase$OR$GetLsDatabaseForComet$requireCond=b("cr:1942626");g.get=a}),98);
__d("MessengerWebTimeSpentFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("3849");c=b("FalcoLoggerInternal").create("messenger_web_time_spent",a);e.exports=c}),null);